<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ENGLISH WITH AI BAYAN ‚Äì Advanced</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      --main:#ff6f00;          /* –ù–ê–°–´–©–ï–ù–ù–´–ô –û–†–ê–ù–ñ–ï–í–´–ô */
      --main-dark:#e65100;     /* –¢–ï–ú–ù–´–ô –û–†–ê–ù–ñ–ï–í–´–ô */
      --soft:#ff8f00;          /* –ú–Ø–ì–ö–ò–ô –û–†–ê–ù–ñ–ï–í–´–ô */
      --gold:#ffd54f;
      --bg:#fff9f0;            /* –û–ß–ï–ù–¨ –°–í–ï–¢–õ–´–ô –û–†–ê–ù–ñ–ï–í–´–ô –§–û–ù */
      --topicColor:#ff6f00;
    }

    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    }

    body{
      background:var(--bg);
      color:#3a2b1f;
    }

    /* HEADER ------------------------------------------------------------ */
    header{
      background:linear-gradient(90deg,var(--main-dark),var(--main));
      color:#fff;
      padding:10px 24px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      box-shadow:0 2px 6px rgba(0,0,0,.25);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .logo-img{
      width:52px;
      height:52px;
      border-radius:50%;
      object-fit:cover;
      border:3px solid var(--gold);
      background:white;
    }

    .brand-text h1{
      font-size:18px;
      letter-spacing:.04em;
    }

    .brand-text span{
      font-size:12px;
      opacity:.9;
    }

    .top-info{
      font-size:13px;
      text-align:right;
    }
    .top-info strong{color:var(--gold);}

    /* MAIN -------------------------------------------------------------- */
    main{
      padding:16px;
      max-width:1300px;
      margin:0 auto;
    }

    .card{
      background:#fff;
      border-radius:14px;
      box-shadow:0 4px 14px rgba(0,0,0,.1);
      padding:20px;
    }

    .hidden{display:none !important;}

    .section-title{
      font-size:18px;
      margin-bottom:10px;
      font-weight:600;
    }
    .muted{
      color:#6b5f55;
      font-size:12px;
    }

    .field-label{
      font-size:14px;
      margin-bottom:4px;
    }

    .text-input{
      width:100%;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid #d6cec7;
      margin-bottom:14px;
      font-size:14px;
      background:#fffdf8;
    }
    .text-input:focus{
      outline:none;
      border-color:var(--soft);
      box-shadow:0 0 0 2px rgba(255,143,0,.25);
    }

    /* BUTTONS ----------------------------------------------------------- */
    .btn{
      border:none;
      border-radius:10px;
      padding:10px 18px;
      font-size:14px;
      font-weight:600;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:6px;
    }

    .btn-primary{
      background:var(--main);
      color:#fff;
    }
    .btn-primary:hover{background:var(--main-dark);}

    .btn-ghost{
      background:#fff3e0;
      color:var(--main-dark);
    }
    .btn-ghost:hover{
      background:#ffe0b2;
    }

    .error{
      margin-top:10px;
      color:#b00020;
      font-size:13px;
    }

    /* LOGIN ------------------------------------------------------------- */
    #loginScreen{
      max-width:520px;
      margin:40px auto;
    }

    /* MAIN MENU --------------------------------------------------------- */
    #mainMenuScreen{
      display:grid;
      grid-template-columns:2fr 1.2fr;
      gap:16px;
    }
    @media(max-width:960px){
      #mainMenuScreen{
        grid-template-columns:1fr;
      }
    }

    .tag{
      display:inline-block;
      padding:3px 7px;
      border-radius:999px;
      background:#ffe0b2;
      font-size:11px;
      color:var(--main-dark);
    }

    .top-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:8px;
      margin-bottom:12px;
    }

    .stars-badge{
      display:inline-flex;
      align-items:center;
      gap:4px;
      padding:4px 8px;
      border-radius:999px;
      background:#fff8e1;
      border:1px solid #ffecb3;
      font-size:12px;
    }
    .star-icon{color:#ffa000;}

    .topics-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }
    @media(max-width:700px){
      .topics-grid{grid-template-columns:1fr;}
    }

    .topic-card{
      border-radius:12px;
      border:1px solid #ffe0b2;
      padding:10px 12px;
      background:#fffdf7;
      cursor:pointer;
      transition:.15s;
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .topic-card:hover{
      background:#fff3e0;
      transform:translateY(-1px);
    }

    /* AI PANEL ---------------------------------------------------------- */
    #aiPanel{
      background:#fff;
      border-radius:14px;
      padding:14px;
      box-shadow:0 2px 10px rgba(0,0,0,.07);
      display:flex;
      flex-direction:column;
      gap:8px;
      min-height:260px;
    }

    #aiPanel h3{
      font-size:15px;
      margin-bottom:4px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:6px;
    }
    #aiLimit{font-size:11px;}

    .chat-note{
      font-size:11px;
      color:#6b5f55;
    }

    .chat-box{
      flex:1;
      border-radius:10px;
      border:1px solid #ffe0b2;
      padding:8px;
      background:#fffdf7;
      font-size:13px;
      overflow-y:auto;
    }

    #aiQuestion{
      width:100%;
      min-height:60px;
      resize:vertical;
      border-radius:10px;
      border:1px solid #ffe0b2;
      padding:8px;
      background:#fffdf7;
    }

    /* TOPIC SCREEN ------------------------------------------------------ */
    #topicScreen{
      max-width:1000px;
      margin:0 auto;
    }

    .topic-header{
      border-radius:16px 16px 0 0;
      padding:14px 16px;
      background:linear-gradient(90deg,var(--topicColor),var(--main-dark));
      color:#fff;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }

    .topic-header-title{
      font-size:18px;
      font-weight:600;
    }

    .topic-header-buttons{
      display:flex;
      gap:6px;
    }

    .btn-topic{
      border:none;
      border-radius:999px;
      padding:6px 12px;
      font-size:12px;
      font-weight:600;
      cursor:pointer;
    }

    .btn-topic.back{
      background:#fff;
      color:var(--topicColor);
    }

    .btn-topic.menu{
      background:rgba(255,255,255,.3);
      color:#fff;
      border:1px solid rgba(255,255,255,.4);
    }

    .topic-body{
      background:#fff;
      border-radius:0 0 16px 16px;
      box-shadow:0 4px 14px rgba(0,0,0,.1);
      padding:16px;
    }

    .grammar-box{
      background:#fff7e6;
      border-left:4px solid var(--topicColor);
      padding:10px 12px;
      border-radius:10px;
      font-size:14px;
    }

    .formula{
      font-family:monospace;
      background:#ffe0b2;
      padding:3px 6px;
      border-radius:6px;
      display:inline-block;
      margin-top:4px;
      margin-right:4px;
    }

    .examples li{
      margin-left:18px;
      margin-bottom:2px;
      font-size:13px;
    }

    /* PRINT MODE -------------------------------------------------------- */
    @media print{
      header, #loginScreen, #mainMenuScreen, #teacherScreen{
        display:none !important;
      }
      body{ background:#fff; }
      #topicScreen{ display:block !important; }
      .topic-body{ box-shadow:none; border-radius:0; }
    }

  </style>
</head>

<body>
<header>
  <div class="brand">
    <img src="logo.png" class="logo-img" alt="">
    <div class="brand-text">
      <h1>ENGLISH WITH AI BAYAN</h1>
      <span>Advanced ¬∑ 30 grammar topics</span>
    </div>
  </div>
  <div class="top-info" id="topInfo">Not logged in</div>
</header>

<main>

  <!-- LOGIN -->
  <section id="loginScreen" class="card">
    <h2 class="section-title">Login</h2>
    <p class="muted">Enter your Name and Code.</p>

    <label class="field-label" for="loginName">Name</label>
    <input id="loginName" class="text-input" type="text" placeholder="Your name">

    <label class="field-label" for="loginCode">Code</label>
    <input id="loginCode" class="text-input" type="password" placeholder="Student or teacher code">

    <div style="display:flex;gap:8px;margin-top:4px">
      <button class="btn btn-primary" onclick="handleLogin()">Login</button>
      <button class="btn btn-ghost" onclick="backToLogin()">Reset</button>
    </div>

    <div id="loginError" class="error hidden"></div>
  </section>

  <!-- MAIN MENU -->
  <section id="mainMenuScreen" class="hidden">
    <section class="card">
      <div class="top-row">
        <div>
          <h2 class="section-title">Advanced grammar topics</h2>
          <div id="menuInfo" class="muted"></div>
        </div>
        <div>
          <span class="stars-badge">
            <span class="star-icon">‚≠ê</span>
            Stars: <span id="menuStars">0</span>
          </span>
        </div>
      </div>

      <div class="topics-grid" id="menuTopics"></div>
    </section>

    <!-- AI PANEL -->
    <aside id="aiPanel">
      <div>
        <h3>
          AI Bayan
          <span id="aiLimit"></span>
        </h3>
        <p class="chat-note">AI chat will be available soon.</p>
      </div>
      <div id="chatBox" class="chat-box"></div>
      <div>
        <textarea id="aiQuestion" disabled placeholder="AI chat is disabled"></textarea>
        <div class="chat-actions">
          <button class="btn btn-primary" id="askBtn" disabled>Ask</button>
        </div>
      </div>
    </aside>
  </section>

  <!-- TOPIC SCREEN -->
  <section id="topicScreen" class="hidden">
    <div class="topic-header">
      <div class="topic-header-title" id="topicHeaderTitle">Topic</div>
      <div class="topic-header-buttons">
        <button class="btn-topic back" onclick="backToMenu()">‚Üê Back</button>
        <button class="btn-topic menu" onclick="backToMenu()">üè†</button>
        <button class="btn-topic menu" onclick="window.print()">üñ®</button>
      </div>
    </div>

    <div class="topic-body">
      <div id="topicRuleContainer"></div>
      <div id="topicExercisesContainer"></div>
      <div id="topicStatus" class="muted"></div>
    </div>
  </section>

  <!-- TEACHER SCREEN -->
  <section id="teacherScreen" class="hidden card">
    <div class="top-buttons">
      <button class="btn btn-ghost" onclick="backToLogin()">‚Üê Back</button>
      <span class="tag">Teacher mode</span>
    </div>

    <h2 class="section-title">Teacher dashboard</h2>
    <p class="muted">Shows attempt status + stars.</p>

    <div class="table-wrapper">
      <table id="teacherTable">
        <thead>
          <tr>
            <th>Class</th>
            <th>Code</th>
            <th>Name</th>
            <th>Stars</th>
            <th>Last login</th>
            <th>Attempts</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

</main>
<script>
/* ---------- CLASS RANGES (PIN) ---------- */

const classRanges = [
  { cls: "3E",  from: 101,  to: 115 },
  { cls: "4G",  from: 201,  to: 215 },
  { cls: "5G",  from: 301,  to: 315 },
  { cls: "5Zh", from: 401,  to: 415 },
  { cls: "6G",  from: 501,  to: 515 },
  { cls: "7B",  from: 601,  to: 615 },
  { cls: "7V",  from: 701,  to: 715 },
  { cls: "8E",  from: 801,  to: 815 },
  { cls: "9Zh", from: 901,  to: 915 },
  { cls: "10A", from: 1001, to: 1015 }
];

function getClassByCode(num){
  for(const r of classRanges){
    if(num >= r.from && num <= r.to) return r.cls;
  }
  return null;
}

/* ---------- TOPIC COLORS (30 —à—Ç—É–∫ –ø–æ–¥ –æ—Ä–∞–Ω–∂–µ–≤—É—é —Ç–µ–º—É) ---------- */

const topicColors = {
  1:"#f4511e",
  2:"#fb8c00",
  3:"#ef6c00",
  4:"#ff7043",
  5:"#ff8f00",
  6:"#ffb300",
  7:"#f57c00",
  8:"#e64a19",
  9:"#ff9100",
  10:"#ff6f00",
  11:"#f9a825",
  12:"#ffb74d",
  13:"#ffa726",
  14:"#ff9800",
  15:"#ffcc80",
  16:"#ffb300",
  17:"#fb8c00",
  18:"#f57c00",
  19:"#ef6c00",
  20:"#e65100",
  21:"#ff7043",
  22:"#ff6f00",
  23:"#ff8f00",
  24:"#ffa000",
  25:"#ffb300",
  26:"#ffca28",
  27:"#ffb74d",
  28:"#ffa726",
  29:"#ff9800",
  30:"#ff6f00"
};

/* ---------- TOPICS (–ü–û–ö–ê –ü–£–°–¢–û, –í –ß–ê–°–¢–ò 3 –ó–ê–ú–ï–ù–ò–ú) ---------- */
const topics = [
  {
    id:1,
    title:"Inversion after negative adverbials",
    level:"Advanced",
    explanation:"We use inversion (auxiliary + subject) after negative or limiting adverbials like never, seldom, rarely, only then, not until to sound more formal or emphatic.",
    ruleRu:"–ü–æ—Å–ª–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Ä–µ—á–∏–π (never, seldom, rarely, only then, not until –∏ –¥—Ä.) –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–Ω–≤–µ—Ä—Å–∏—é: –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –≥–ª–∞–≥–æ–ª + –ø–æ–¥–ª–µ–∂–∞—â–µ–µ, —á—Ç–æ–±—ã —É—Å–∏–ª–∏—Ç—å –≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏–µ.",
    formulas:[
      "Never / Rarely / Seldom + AUX + S + V",
      "Not until + clause + AUX + S + V",
      "Only then / only later + AUX + S + V"
    ],
    examples:[
      "Never have I seen such chaos.",
      "Not until he left did she realise her mistake."
    ],
    exercises:[
      {
        title:"1) Affirmative (choose inversion)",
        questions:[
          {
            text:"I have seen such chaos many times.",
            options:[
              "Never have I seen such chaos.",
              "I never have seen such chaos."
            ],
            correct:0
          },
          {
            text:"She realised the truth only then.",
            options:[
              "Only then did she realise the truth.",
              "She realised the truth only then she did."
            ],
            correct:0
          },
          {
            text:"We noticed the problem only after the test.",
            options:[
              "Only after the test did we notice the problem.",
              "After the test only we noticed the problem."
            ],
            correct:0
          },
          {
            text:"I heard such silence before.",
            options:[
              "Never before had I heard such silence.",
              "I had never before heard such silence it."
            ],
            correct:0
          }
        ]
      },
      {
        title:"2) Negative",
        questions:[
          {
            text:"–Ø –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–Ω–∏–º–∞–ª —ç—Ç—É —Ç–µ–º—É.",
            options:[
              "Never have I understood this topic.",
              "I have never understood this topic it."
            ],
            correct:0
          },
          {
            text:"–û–Ω —Ä–µ–¥–∫–æ –¥–µ–ª–∞–µ—Ç –æ—à–∏–±–∫–∏.",
            options:[
              "Rarely does he make mistakes.",
              "He does rarely make mistakes."
            ],
            correct:0
          },
          {
            text:"–û–Ω–∏ –ø–æ—á—Ç–∏ –Ω–µ –∑–∞–º–µ—á–∞–ª–∏ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏.",
            options:[
              "Hardly did they notice the danger.",
              "They did hardly notice the danger."
            ],
            correct:0
          },
          {
            text:"–ú–∞–ª–æ —è –æ–∂–∏–¥–∞–ª —Ç–∞–∫–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.",
            options:[
              "Little did I expect such a result.",
              "I did little expect such a result."
            ],
            correct:0
          }
        ]
      },
      {
        title:"3) Questions",
        questions:[
          {
            text:"–°–æ—Å—Ç–∞–≤—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å: you / ever / see / such a storm?",
            options:[
              "Have you ever seen such a storm?",
              "Ever have you seen such a storm?"
            ],
            correct:0
          },
          {
            text:"–°–æ—Å—Ç–∞–≤—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å: she / often / arrive / late?",
            options:[
              "Does she often arrive late?",
              "Often does she arrive late?"
            ],
            correct:0
          },
          {
            text:"–°–æ—Å—Ç–∞–≤—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å: they / rarely / visit / you?",
            options:[
              "Do they rarely visit you?",
              "Rarely do they visit you?"
            ],
            correct:0
          },
          {
            text:"–°–æ—Å—Ç–∞–≤—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å: he / ever / tell / lies?",
            options:[
              "Does he ever tell lies?",
              "Does he never tell lies?"
            ],
            correct:0
          }
        ]
      },
      {
        title:"4) Word order",
        questions:[
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤.",
            options:[
              "Not until the end of the lesson did they understand it.",
              "Did they understand it not until the end of the lesson."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "Only then did she start to cry.",
              "She started to cry only then did."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "Never before had I heard this story.",
              "Had I never before heard this story."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "Little did I know about their plan.",
              "I did little know about their plan."
            ],
            correct:0
          }
        ]
      },
      {
        title:"5) Build the sentence (inversion)",
        questions:[
          {
            text:"(–Ω–∏–∫–æ–≥–¥–∞ / —è / –Ω–µ –≤–∏–¥–µ–ª / —Ç–∞–∫–æ–π –≤–∏–¥)",
            options:[
              "Never have I seen such a view.",
              "I have never seen such a view it."
            ],
            correct:0
          },
          {
            text:"(—Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ / —è / –ø–æ–Ω—è–ª / –æ—à–∏–±–∫—É)",
            options:[
              "Only then did I understand the mistake.",
              "I understood only then did the mistake."
            ],
            correct:0
          },
          {
            text:"(–Ω–µ —Ä–∞–Ω—å—à–µ —á–µ–º / –æ–Ω –ø—Ä–∏—à—ë–ª / –º—ã –Ω–∞—á–∞–ª–∏)",
            options:[
              "Not until he arrived did we start.",
              "We started not until he arrived did."
            ],
            correct:0
          },
          {
            text:"(—Ä–µ–¥–∫–æ / –æ–Ω / –≥–æ–≤–æ—Ä–∏—Ç / –ø—É–±–ª–∏—á–Ω–æ)",
            options:[
              "Rarely does he speak in public.",
              "He rarely does speak in public."
            ],
            correct:0
          }
        ]
      },
      {
        title:"6) Translate into English (with inversion)",
        questions:[
          {
            text:"–ù–∏–∫–æ–≥–¥–∞ —Ä–∞–Ω—å—à–µ —è –Ω–µ –±—ã–ª —Ç–∞–∫ –∑–∞–Ω—è—Ç.",
            options:[
              "Never before have I been so busy.",
              "I have never been so busy before it."
            ],
            correct:0
          },
          {
            text:"–¢–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ —è –ø–æ–Ω—è–ª, —á—Ç–æ –æ–Ω–∞ –ø—Ä–∞–≤–∞.",
            options:[
              "Only then did I realise that she was right.",
              "I realised only then that she was right did."
            ],
            correct:0
          },
          {
            text:"–†–µ–¥–∫–æ –æ–Ω —Å–æ–≥–ª–∞—à–∞–µ—Ç—Å—è –Ω–∞ —Ç–∞–∫–∏–µ —É—Å–ª–æ–≤–∏—è.",
            options:[
              "Rarely does he agree to such conditions.",
              "He does rarely agree to such conditions."
            ],
            correct:0
          },
          {
            text:"–ú–∞–ª–æ —è –∑–Ω–∞–ª –æ –µ—ë –ø–ª–∞–Ω–∞—Ö.",
            options:[
              "Little did I know about her plans.",
              "I knew little about her plans did."
            ],
            correct:0
          }
        ]
      }
    ]
  },

  {
    id:2,
    title:"Cleft sentences for emphasis",
    level:"Advanced",
    explanation:"Cleft sentences with It is/was and What‚Ä¶ is/was help us emphasise a person, thing, time, place or reason.",
    ruleRu:"Cleft-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ–º–æ–≥–∞—é—Ç –ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—å –≤–∞–∂–Ω—É—é —á–∞—Å—Ç—å: It was John who‚Ä¶, What I need is‚Ä¶. –ò—Å–ø–æ–ª—å–∑—É–µ–º It is/was + X + who/that‚Ä¶ –∏–ª–∏ What + clause + is/was + X.",
    formulas:[
      "It is/was + X + who/that + clause",
      "What + clause + is/was + X"
    ],
    examples:[
      "It was my brother who broke the window.",
      "What I need is a short break."
    ],
    exercises:[
      {
        title:"1) Affirmative",
        questions:[
          {
            text:"–ü–æ–¥—á–µ—Ä–∫–Ω–∏ —á–µ–ª–æ–≤–µ–∫–∞: My brother broke the window.",
            options:[
              "It was my brother who broke the window.",
              "My brother it was who broke the window."
            ],
            correct:0
          },
          {
            text:"–ü–æ–¥—á–µ—Ä–∫–Ω–∏ –æ–±—ä–µ–∫—Ç: I need a short break.",
            options:[
              "What I need is a short break.",
              "It is a short break what I need."
            ],
            correct:0
          },
          {
            text:"–ü–æ–¥—á–µ—Ä–∫–Ω–∏ –º–µ—Å—Ç–æ: We met in London.",
            options:[
              "It was in London that we met.",
              "In London it was that we met."
            ],
            correct:0
          },
          {
            text:"–ü–æ–¥—á–µ—Ä–∫–Ω–∏ –≤—Ä–µ–º—è: I saw her yesterday.",
            options:[
              "It was yesterday that I saw her.",
              "Yesterday it was that I saw her."
            ],
            correct:0
          }
        ]
      },
      {
        title:"2) Negative",
        questions:[
          {
            text:"–ù–µ –º–æ—è –∏–¥–µ—è –ø—Ä–æ–≤–∞–ª–∏–ª–∞—Å—å.",
            options:[
              "It was not my idea that failed.",
              "Not my idea it was that failed."
            ],
            correct:0
          },
          {
            text:"–≠—Ç–æ –±—ã–ª –Ω–µ –î–∂–æ–Ω, –∫—Ç–æ –ø–æ–∑–≤–æ–Ω–∏–ª —Ç–µ–±–µ.",
            options:[
              "It was not John who called you.",
              "It not was John who called you."
            ],
            correct:0
          },
          {
            text:"–ú–Ω–µ –Ω–µ –µ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è, –∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.",
            options:[
              "What I do not like is his behaviour.",
              "It is his behaviour what I do not like."
            ],
            correct:0
          },
          {
            text:"–Ø —É—à—ë–ª –Ω–µ –∏–∑-–∑–∞ —Ç–µ–±—è.",
            options:[
              "It was not because of you that I left.",
              "Because of you it was not that I left."
            ],
            correct:0
          }
        ]
      },
      {
        title:"3) Questions",
        questions:[
          {
            text:"–°–¥–µ–ª–∞–π –æ–±—â–∏–π –≤–æ–ø—Ä–æ—Å: It was my brother who broke the window.",
            options:[
              "Was it your brother who broke the window?",
              "Did it your brother who broke the window?"
            ],
            correct:0
          },
          {
            text:"–°–¥–µ–ª–∞–π –æ–±—â–∏–π –≤–æ–ø—Ä–æ—Å: It was in London that we met.",
            options:[
              "Was it in London that we met?",
              "Did we in London that met?"
            ],
            correct:0
          },
          {
            text:"–°–¥–µ–ª–∞–π –æ–±—â–∏–π –≤–æ–ø—Ä–æ—Å: What I need is a break.",
            options:[
              "Is a break what you need?",
              "Is what you need a break?"
            ],
            correct:1
          },
          {
            text:"–°–¥–µ–ª–∞–π –æ–±—â–∏–π –≤–æ–ø—Ä–æ—Å: It was yesterday that she called you.",
            options:[
              "Was it yesterday that she called you?",
              "Did it yesterday that she called you?"
            ],
            correct:0
          }
        ]
      },
      {
        title:"4) Word order",
        questions:[
          {
            text:"–í—ã–±–µ—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ cleft-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
            options:[
              "It was the manager who made the decision.",
              "The manager was who made the decision it."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ cleft-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
            options:[
              "It was in 2010 that the company was founded.",
              "In 2010 was the company founded it."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ cleft-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
            options:[
              "What surprised me was his honesty.",
              "His honesty was what surprised me it."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ cleft-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
            options:[
              "What I enjoy most is travelling.",
              "Travelling is what I enjoy most it."
            ],
            correct:0
          }
        ]
      },
      {
        title:"5) Build the sentence",
        questions:[
          {
            text:"–ü–æ–¥—á–µ—Ä–∫–Ω–∏ –≤—Ä–µ–º—è: We met in 2015.",
            options:[
              "It was in 2015 that we met.",
              "In 2015 it was that we met."
            ],
            correct:0
          },
          {
            text:"–ü–æ–¥—á–µ—Ä–∫–Ω–∏ —á–µ–ª–æ–≤–µ–∫–∞: My teacher inspired me.",
            options:[
              "It was my teacher who inspired me.",
              "My teacher was who inspired me."
            ],
            correct:0
          },
          {
            text:"–ü–æ–¥—á–µ—Ä–∫–Ω–∏ –ø—Ä–∏—á–∏–Ω—É: I left because I was ill.",
            options:[
              "It was because I was ill that I left.",
              "Because I was ill it was that I left."
            ],
            correct:0
          },
          {
            text:"–ü–æ–¥—á–µ—Ä–∫–Ω–∏ –æ–±—ä–µ–∫—Ç: I need your help.",
            options:[
              "What I need is your help.",
              "It is your help what I need."
            ],
            correct:0
          }
        ]
      },
      {
        title:"6) Translate into English",
        questions:[
          {
            text:"–ò–º–µ–Ω–Ω–æ –º–∞–º–∞ –ø–æ–º–æ–≥–ª–∞ –º–Ω–µ.",
            options:[
              "It was my mother who helped me.",
              "My mother was who helped me."
            ],
            correct:0
          },
          {
            text:"–¢–æ, —á—Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ, ‚Äî —ç—Ç–æ –æ—Ç–¥—ã—Ö.",
            options:[
              "What I need is some rest.",
              "That I need is some rest."
            ],
            correct:0
          },
          {
            text:"–ò–º–µ–Ω–Ω–æ –≤ —ç—Ç–æ–º –≥–æ—Ä–æ–¥–µ —è –≤—ã—Ä–æ—Å.",
            options:[
              "It was in this city that I grew up.",
              "In this city I grew up it."
            ],
            correct:0
          },
          {
            text:"–ò–º–µ–Ω–Ω–æ —ç—Ç–∞ –∏–¥–µ—è –∏–∑–º–µ–Ω–∏–ª–∞ –≤—Å—ë.",
            options:[
              "It was this idea that changed everything.",
              "This idea it was that changed everything."
            ],
            correct:0
          }
        ]
      }
    ]
  },

  {
    id:3,
    title:"Mixed conditionals (advanced use)",
    level:"Advanced",
    explanation:"Mixed conditionals connect unreal past actions with present results or unreal present states with unreal past results.",
    ruleRu:"–°–º–µ—à–∞–Ω–Ω—ã–µ —É—Å–ª–æ–≤–Ω—ã–µ —Å–≤—è–∑—ã–≤–∞—é—Ç –Ω–µ—Ä–µ–∞–ª—å–Ω–æ–µ –ø—Ä–æ—à–ª–æ–µ —Å –Ω–∞—Å—Ç–æ—è—â–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º (If + Past Perfect ‚Üí would + V now) –∏–ª–∏ –Ω–µ—Ä–µ–∞–ª—å–Ω–æ–µ –Ω–∞—Å—Ç–æ—è—â–µ–µ —Å –Ω–µ—Ä–µ–∞–ª—å–Ω—ã–º –ø—Ä–æ—à–ª—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º (If + Past Simple ‚Üí would have + V3).",
    formulas:[
      "If + Past Perfect, would + V (now)",
      "If + Past Simple, would have + V3"
    ],
    examples:[
      "If I had studied harder, I would be at university now.",
      "If she were more careful, she would not have lost the documents."
    ],
    exercises:[
      {
        title:"1) Affirmative",
        questions:[
          {
            text:"(–ø—Ä–æ—à–ª–æ–µ ‚Üí —Å–µ–π—á–∞—Å) –Ø –Ω–µ –∫–æ–ø–∏–ª –¥–µ–Ω—å–≥–∏ / —Å–µ–π—á–∞—Å —è –Ω–µ –≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–∏.",
            options:[
              "If I had saved more money, I would be travelling now.",
              "If I saved more money, I would travel now."
            ],
            correct:0
          },
          {
            text:"(–Ω–∞—Å—Ç–æ—è—â–µ–µ ‚Üí –ø—Ä–æ—à–ª–æ–µ) –û–Ω –Ω–µ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π / –æ–Ω –ø—Ä–æ–ø—É—Å—Ç–∏–ª –¥–µ–¥–ª–∞–π–Ω.",
            options:[
              "If he were more responsible, he would not have missed the deadline.",
              "If he had been more responsible, he would not miss the deadline."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.",
            options:[
              "If she had gone to bed earlier, she would not be so tired now.",
              "If she went to bed earlier, she would not have been so tired now."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.",
            options:[
              "If I had listened to you, I would not be in trouble now.",
              "If I listened to you, I would not have been in trouble now."
            ],
            correct:0
          }
        ]
      },
      {
        title:"2) Negative",
        questions:[
          {
            text:"–ï—Å–ª–∏ –±—ã –æ–Ω –Ω–µ —Ç—Ä–∞—Ç–∏–ª –≤—Ä–µ–º—è, —Å–µ–π—á–∞—Å –æ–Ω –Ω–µ –±—ã–ª –±—ã —Ç–∞–∫ –Ω–∞–ø—Ä—è–∂—ë–Ω.",
            options:[
              "If he had not wasted time, he would not be so stressed now.",
              "If he did not waste time, he would not have been so stressed now."
            ],
            correct:0
          },
          {
            text:"–ï—Å–ª–∏ –±—ã —è –Ω–µ –±—ã–ª —Ç–∞–∫–∏–º –∑–∞—Å—Ç–µ–Ω—á–∏–≤—ã–º, —è –±—ã –ø–æ–≥–æ–≤–æ—Ä–∏–ª —Å –Ω–µ–π –Ω–∞ –≤–µ—á–µ—Ä–∏–Ω–∫–µ.",
            options:[
              "If I were not so shy, I would have talked to her at the party.",
              "If I had not been so shy, I would talk to her at the party."
            ],
            correct:0
          },
          {
            text:"–ï—Å–ª–∏ –±—ã –æ–Ω–∏ –Ω–µ –ø–µ—Ä–µ–µ—Ö–∞–ª–∏, –º—ã –≤—Å—ë –µ—â—ë —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞–ª–∏—Å—å –±—ã —Å –Ω–∏–º–∏ —Å–µ–π—á–∞—Å.",
            options:[
              "If they had not moved abroad, we would still see them often now.",
              "If they did not move abroad, we would have still seen them often now."
            ],
            correct:0
          },
          {
            text:"–ï—Å–ª–∏ –±—ã –æ–Ω–∞ –Ω–µ –∑–∞–±–æ–ª–µ–ª–∞, –æ–Ω–∞ –±—ã –ø–æ–µ—Ö–∞–ª–∞ –≤ –ø–æ–µ–∑–¥–∫—É.",
            options:[
              "If she had not been ill, she would have gone on the trip.",
              "If she were not ill, she would have gone on the trip."
            ],
            correct:0
          }
        ]
      },
      {
        title:"3) Questions",
        questions:[
          {
            text:"–ï—Å–ª–∏ –±—ã —è —Å–ª—É—à–∞–ª —Ç–µ–±—è, —Å–µ–π—á–∞—Å —è –±—ã–ª –±—ã —Å—á–∞—Å—Ç–ª–∏–≤–µ–µ.",
            options:[
              "Would you be happier now if you had listened to me?",
              "Would you be happier now if you listened to me?"
            ],
            correct:0
          },
          {
            text:"–ï—Å–ª–∏ –±—ã –æ–Ω –±–æ–ª—å—à–µ —É—á–∏–ª—Å—è, —Å–µ–π—á–∞—Å –æ–Ω –±—ã–ª –±—ã –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ.",
            options:[
              "Would he be at university now if he had studied harder?",
              "Would he be at university now if he studied harder?"
            ],
            correct:0
          },
          {
            text:"–ï—Å–ª–∏ –±—ã –æ–Ω–∞ –±—ã–ª–∞ –∞–∫–∫—É—Ä–∞—Ç–Ω–µ–µ, –æ–Ω–∞ –Ω–µ –ø–æ—Ç–µ—Ä—è–ª–∞ –±—ã –¥–æ–∫—É–º–µ–Ω—Ç—ã.",
            options:[
              "Would she have lost the documents if she were more careful?",
              "Would she lose the documents if she had been more careful?"
            ],
            correct:0
          },
          {
            text:"–ï—Å–ª–∏ –±—ã –º—ã –∂–∏–ª–∏ –±–ª–∏–∂–µ, —Ä–∞–Ω—å—à–µ –º—ã –±—ã –Ω–µ –æ–ø–∞–∑–¥—ã–≤–∞–ª–∏ —Ç–∞–∫ —á–∞—Å—Ç–æ.",
            options:[
              "Would we have been late so often before if we lived closer?",
              "Would we be late so often before if we had lived closer?"
            ],
            correct:0
          }
        ]
      },
      {
        title:"4) Word order",
        questions:[
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤.",
            options:[
              "If I had known about the meeting, I would be there now.",
              "If I had known about the meeting, would be there now I."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤.",
            options:[
              "If she were more flexible, she would have accepted the new rules.",
              "If more flexible she were, she would have accepted the new rules."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤.",
            options:[
              "If they had not sold the car, they would be using it now.",
              "If they had not sold the car, would be using it they now."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤.",
            options:[
              "If I had taken that job, I would be living abroad now.",
              "If I had taken that job, would be living abroad now I."
            ],
            correct:0
          }
        ]
      },
      {
        title:"5) Build the sentence",
        questions:[
          {
            text:"–ñ–∞–ª—å, —á—Ç–æ —è –Ω–µ –≤—ã—É—á–∏–ª –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Ä–∞–Ω—å—à–µ / —Å–µ–π—á–∞—Å –±—ã–ª–æ –±—ã –ª–µ–≥—á–µ.",
            options:[
              "If I had learnt English earlier, it would be easier now.",
              "If I learnt English earlier, it would have been easier now."
            ],
            correct:0
          },
          {
            text:"–ï—Å–ª–∏ –±—ã –æ–Ω –±—ã–ª –æ—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ, –æ–Ω –±—ã –Ω–µ –ø–æ–ø–∞–ª –≤ –∞–≤–∞—Ä–∏—é –≤—á–µ—Ä–∞.",
            options:[
              "If he had been more careful, he would not have had an accident yesterday.",
              "If he were more careful, he would not have an accident yesterday."
            ],
            correct:0
          },
          {
            text:"–ï—Å–ª–∏ –±—ã —è –Ω–µ –ø–æ—Ç—Ä–∞—Ç–∏–ª —Å—Ç–æ–ª—å–∫–æ –¥–µ–Ω–µ–≥, —Å–µ–π—á–∞—Å —è –±—ã–ª –±—ã –±–æ–≥–∞—á–µ.",
            options:[
              "If I had not spent so much money, I would be richer now.",
              "If I did not spend so much money, I would have been richer now."
            ],
            correct:0
          },
          {
            text:"–ï—Å–ª–∏ –±—ã –æ–Ω–∞ –±—ã–ª–∞ —É–≤–µ—Ä–µ–Ω–Ω–µ–µ, –æ–Ω–∞ –±—ã –ø—Ä–∏–Ω—è–ª–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ—à–ª–æ–º –≥–æ–¥—É.",
            options:[
              "If she were more confident, she would have accepted the offer last year.",
              "If she had been more confident, she would accept the offer last year."
            ],
            correct:0
          }
        ]
      },
      {
        title:"6) Translate into English",
        questions:[
          {
            text:"–ï—Å–ª–∏ –±—ã —è –±–æ–ª—å—à–µ —Ä–∞–±–æ—Ç–∞–ª –≤ —à–∫–æ–ª–µ, —Å–µ–π—á–∞—Å –º–Ω–µ –±—ã–ª–æ –±—ã –ª–µ–≥—á–µ –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ.",
            options:[
              "If I had worked harder at school, it would be easier for me at university now.",
              "If I worked harder at school, it would have been easier for me at university now."
            ],
            correct:0
          },
          {
            text:"–ï—Å–ª–∏ –±—ã –æ–Ω –±—ã–ª –±–æ–ª–µ–µ —Ç–µ—Ä–ø–µ–ª–∏–≤—ã–º, –æ–Ω –±—ã –Ω–µ –Ω–∞–∫—Ä–∏—á–∞–ª –Ω–∞ –Ω–µ—ë –≤—á–µ—Ä–∞.",
            options:[
              "If he were more patient, he would not have shouted at her yesterday.",
              "If he had been more patient, he would not shout at her yesterday."
            ],
            correct:0
          },
          {
            text:"–ï—Å–ª–∏ –±—ã –æ–Ω–∏ –Ω–µ —É–µ—Ö–∞–ª–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—É, –º—ã –±—ã —Å–µ–π—á–∞—Å —á–∞—Å—Ç–æ —Å –Ω–∏–º–∏ –≤—Å—Ç—Ä–µ—á–∞–ª–∏—Å—å.",
            options:[
              "If they had not moved abroad, we would be meeting them often now.",
              "If they did not move abroad, we would have met them often now."
            ],
            correct:0
          },
          {
            text:"–ï—Å–ª–∏ –±—ã –º—ã –Ω–µ –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ —Å—Ç–æ–ª—å–∫–æ –¥–µ–Ω–µ–≥, —Å–µ–π—á–∞—Å —É –Ω–∞—Å –±—ã–ª–æ –±—ã –±–æ–ª—å—à–µ —Å–≤–æ–±–æ–¥—ã.",
            options:[
              "If we had not spent so much money, we would have more freedom now.",
              "If we did not spend so much money, we would have had more freedom now."
            ],
            correct:0
          }
        ]
      }
    ]
  },

  {
    id:4,
    title:"Modal verbs of deduction (present & past)",
    level:"Advanced",
    explanation:"We use must, might, may, could and can‚Äôt to talk about how sure we are about something (deduction) in the present and the past.",
    ruleRu:"Must / can‚Äôt / might / may / could ‚Äì –º–æ–¥–∞–ª—å–Ω—ã–µ –≥–ª–∞–≥–æ–ª—ã –¥–ª—è –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π: must ‚Äì –ø–æ—á—Ç–∏ —É–≤–µ—Ä–µ–Ω—ã, can‚Äôt ‚Äì —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ; might/may/could ‚Äì –≤–æ–∑–º–æ–∂–Ω–æ. –î–ª—è –ø—Ä–æ—à–ª–æ–≥–æ –¥–æ–±–∞–≤–ª—è–µ–º have + V3.",
    formulas:[
      "must + V / must have + V3",
      "can‚Äôt + V / can‚Äôt have + V3",
      "might/may/could + V / might/may/could have + V3"
    ],
    examples:[
      "He must be at home ‚Äì the lights are on.",
      "She can‚Äôt have finished already ‚Äì it was too difficult."
    ],
    exercises:[
      {
        title:"1) Affirmative (present)",
        questions:[
          {
            text:"The lights are on. He ___ be at home.",
            options:[
              "must",
              "can‚Äôt"
            ],
            correct:0
          },
          {
            text:"They left very early. They ___ be tired now.",
            options:[
              "must",
              "might not"
            ],
            correct:0
          },
          {
            text:"It‚Äôs dark and cloudy. It ___ rain later.",
            options:[
              "might",
              "can‚Äôt"
            ],
            correct:0
          },
          {
            text:"She studied a lot. She ___ know the answer.",
            options:[
              "must",
              "couldn‚Äôt"
            ],
            correct:0
          }
        ]
      },
      {
        title:"2) Negative / impossibility",
        questions:[
          {
            text:"He is only 10. He ___ be at university.",
            options:[
              "can‚Äôt",
              "must"
            ],
            correct:0
          },
          {
            text:"The room is empty. They ___ be here now.",
            options:[
              "can‚Äôt",
              "must"
            ],
            correct:0
          },
          {
            text:"She never studies. She ___ be the best student.",
            options:[
              "can‚Äôt",
              "must"
            ],
            correct:0
          },
          {
            text:"It‚Äôs July and very hot. It ___ be snow.",
            options:[
              "can‚Äôt",
              "might"
            ],
            correct:0
          }
        ]
      },
      {
        title:"3) Past deduction",
        questions:[
          {
            text:"His phone is off. He ___ have forgotten to charge it.",
            options:[
              "must",
              "must have"
            ],
            correct:1
          },
          {
            text:"The road is dry. It ___ have rained last night.",
            options:[
              "can‚Äôt",
              "can‚Äôt have"
            ],
            correct:1
          },
          {
            text:"She looked very happy yesterday. She ___ have got good news.",
            options:[
              "might have",
              "can‚Äôt have"
            ],
            correct:0
          },
          {
            text:"He doesn‚Äôt know about the meeting. He ___ have read the email.",
            options:[
              "can‚Äôt have",
              "must have"
            ],
            correct:0
          }
        ]
      },
      {
        title:"4) Word order",
        questions:[
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "He must have forgotten his keys.",
              "He have must forgotten his keys."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "She can‚Äôt have finished already.",
              "She have can‚Äôt finished already."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "They might be waiting outside.",
              "They be might waiting outside."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "It may have been a mistake.",
              "It have may been a mistake."
            ],
            correct:0
          }
        ]
      },
      {
        title:"5) Build the sentence",
        questions:[
          {
            text:"–ù–∞–≤–µ—Ä–Ω—è–∫–∞ –æ–Ω –¥–æ–º–∞ (–≤–∏–¥–µ–Ω –µ–≥–æ –≤–µ–ª–æ—Å–∏–ø–µ–¥).",
            options:[
              "He must be at home.",
              "He can‚Äôt be at home."
            ],
            correct:0
          },
          {
            text:"–≠—Ç–æ–≥–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å (—ç—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ).",
            options:[
              "It can‚Äôt be true.",
              "It must be true."
            ],
            correct:0
          },
          {
            text:"–í–æ–∑–º–æ–∂–Ω–æ, –æ–Ω–∞ –∑–∞–±—ã–ª–∞ –ø—Ä–æ –≤—Å—Ç—Ä–µ—á—É.",
            options:[
              "She might have forgotten about the meeting.",
              "She must have forgotten about the meeting."
            ],
            correct:0
          },
          {
            text:"–û–Ω —Ç–æ—á–Ω–æ –Ω–µ —Å–¥–µ–ª–∞–ª –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ.",
            options:[
              "He can‚Äôt have done his homework.",
              "He mustn‚Äôt have done his homework."
            ],
            correct:0
          }
        ]
      },
      {
        title:"6) Translate into English",
        questions:[
          {
            text:"–û–Ω –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ —É—Å—Ç–∞–ª (–æ–Ω —Ä–∞–±–æ—Ç–∞–ª –≤–µ—Å—å –¥–µ–Ω—å).",
            options:[
              "He must be tired.",
              "He can‚Äôt be tired."
            ],
            correct:0
          },
          {
            text:"–û–Ω–∞ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ —É–∂–µ —É—à–ª–∞ –¥–æ–º–æ–π.",
            options:[
              "She must have gone home.",
              "She can‚Äôt have gone home."
            ],
            correct:0
          },
          {
            text:"–≠—Ç–æ–≥–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å ‚Äî –æ–Ω —Å–ª–∏—à–∫–æ–º —á–µ—Å—Ç–Ω—ã–π.",
            options:[
              "It can‚Äôt be true ‚Äì he is too honest.",
              "It must be true ‚Äì he is too honest."
            ],
            correct:0
          },
          {
            text:"–í–æ–∑–º–æ–∂–Ω–æ, –æ–Ω–∏ –æ–ø–æ–∑–¥–∞–ª–∏ –Ω–∞ –∞–≤—Ç–æ–±—É—Å.",
            options:[
              "They might have missed the bus.",
              "They must have missed the bus."
            ],
            correct:0
          }
        ]
      }
    ]
  },

  {
    id:5,
    title:"Wishes and regrets (I wish / If only / would rather)",
    level:"Advanced",
    explanation:"We use I wish / If only to talk about regrets and unreal wishes about the present, past or future. We use would rather to express preference.",
    ruleRu:"I wish / If only + Past Simple ‚Äì —Å–æ–∂–∞–ª–µ–Ω–∏–µ –æ –Ω–∞—Å—Ç–æ—è—â–µ–º; I wish / If only + Past Perfect ‚Äì —Å–æ–∂–∞–ª–µ–Ω–∏–µ –æ –ø—Ä–æ—à–ª–æ–º; I wish + would ‚Äì –∂–µ–ª–∞–Ω–∏–µ, —á—Ç–æ–±—ã –∫—Ç–æ-—Ç–æ –∏–∑–º–µ–Ω–∏–ª –ø–æ–≤–µ–¥–µ–Ω–∏–µ; would rather ‚Äì –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ.",
    formulas:[
      "I wish / If only + Past Simple (now)",
      "I wish / If only + Past Perfect (past)",
      "I wish + would + V",
      "would rather + V / would rather + S + Past Simple"
    ],
    examples:[
      "I wish I spoke English better.",
      "If only I had studied harder.",
      "I wish you would stop shouting.",
      "I would rather stay at home."
    ],
    exercises:[
      {
        title:"1) Affirmative",
        questions:[
          {
            text:"–ú–Ω–µ –∂–∞–ª—å, —á—Ç–æ —É –º–µ–Ω—è –Ω–µ—Ç –±–æ–ª—å—à–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.",
            options:[
              "I wish I had more free time.",
              "I wish I have more free time."
            ],
            correct:0
          },
          {
            text:"–ñ–∞–ª—å, —á—Ç–æ —è –Ω–µ –∂–∏–≤—É —É –º–æ—Ä—è.",
            options:[
              "If only I lived by the sea.",
              "If only I live by the sea."
            ],
            correct:0
          },
          {
            text:"–ñ–∞–ª—å, —á—Ç–æ –≤—á–µ—Ä–∞ —è –Ω–µ –±—ã–ª –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ.",
            options:[
              "I wish I had been more careful yesterday.",
              "I wish I was more careful yesterday."
            ],
            correct:0
          },
          {
            text:"–Ø –ø—Ä–µ–¥–ø–æ—á—ë–ª –±—ã –æ—Å—Ç–∞—Ç—å—Å—è –¥–æ–º–∞ —Å–µ–≥–æ–¥–Ω—è.",
            options:[
              "I would rather stay at home today.",
              "I would rather to stay at home today."
            ],
            correct:0
          }
        ]
      },
      {
        title:"2) Negative",
        questions:[
          {
            text:"–ú–Ω–µ –Ω–µ –∂–∞–ª—å, —á—Ç–æ —è –Ω–µ –∫—É–ø–∏–ª —Ç—É –º–∞—à–∏–Ω—É. (–≤—ã–±–µ—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–µ —Å–æ–∂–∞–ª–µ–Ω–∏–µ)",
            options:[
              "I wish I had bought that car.",
              "I don‚Äôt wish I had bought that car."
            ],
            correct:1
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –ö–û–¢–û–†–û–ï –ù–ï –ü–û–î–•–û–î–ò–¢ –∫–∞–∫ —Å–æ–∂–∞–ª–µ–Ω–∏–µ –æ –ø—Ä–æ—à–ª–æ–º.",
            options:[
              "If only I had told her the truth.",
              "If only I tell her the truth."
            ],
            correct:1
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "I wish I didn‚Äôt have so much homework.",
              "I wish I don‚Äôt have so much homework."
            ],
            correct:1
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "If only he wouldn‚Äôt shout so much.",
              "If only he doesn‚Äôt shout so much."
            ],
            correct:1
          }
        ]
      },
      {
        title:"3) Questions",
        questions:[
          {
            text:"–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å: You regret that you didn‚Äôt study harder.",
            options:[
              "Do you wish you had studied harder?",
              "Do you wish you studied harder?"
            ],
            correct:0
          },
          {
            text:"–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å: You regret your friend‚Äôs behaviour.",
            options:[
              "Do you wish he would behave better?",
              "Do you wish he behaves better?"
            ],
            correct:0
          },
          {
            text:"–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å: You prefer to stay at home.",
            options:[
              "Would you rather stay at home?",
              "Would you rather to stay at home?"
            ],
            correct:0
          },
          {
            text:"–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å: You regret not telling her the truth.",
            options:[
              "Do you wish you had told her the truth?",
              "Do you wish you told her the truth?"
            ],
            correct:0
          }
        ]
      },
      {
        title:"4) Word order",
        questions:[
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤.",
            options:[
              "I wish I knew the answer.",
              "I wish knew I the answer."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤.",
            options:[
              "If only I had listened to you.",
              "If only had I listened to you."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤.",
            options:[
              "I would rather you stayed here.",
              "I would rather stayed you here."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤.",
            options:[
              "I wish he would stop talking.",
              "I wish would he stop talking."
            ],
            correct:0
          }
        ]
      },
      {
        title:"5) Build the sentence",
        questions:[
          {
            text:"–ñ–∞–ª—å, —á—Ç–æ —Å–µ–π—á–∞—Å –Ω–µ –ª–µ—Ç–æ.",
            options:[
              "I wish it was summer now.",
              "I wish it had been summer now."
            ],
            correct:0
          },
          {
            text:"–ñ–∞–ª—å, —á—Ç–æ –≤—á–µ—Ä–∞ —è –Ω–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª—Å—è –∫ —Ç–µ—Å—Ç—É.",
            options:[
              "If only I had prepared for the test yesterday.",
              "If only I prepared for the test yesterday."
            ],
            correct:0
          },
          {
            text:"–Ø –±—ã –ø—Ä–µ–¥–ø–æ—á—ë–ª –ø–æ–π—Ç–∏ –≤ –∫–∏–Ω–æ.",
            options:[
              "I would rather go to the cinema.",
              "I would rather to go to the cinema."
            ],
            correct:0
          },
          {
            text:"–ñ–∞–ª—å, —á—Ç–æ –æ–Ω —Ç–∞–∫ –º–Ω–æ–≥–æ –∂–∞–ª—É–µ—Ç—Å—è.",
            options:[
              "I wish he wouldn‚Äôt complain so much.",
              "I wish he doesn‚Äôt complain so much."
            ],
            correct:0
          }
        ]
      },
      {
        title:"6) Translate into English",
        questions:[
          {
            text:"–ñ–∞–ª—å, —á—Ç–æ —è –Ω–µ –≤—ã—É—á–∏–ª –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Ä–∞–Ω—å—à–µ.",
            options:[
              "I wish I had learnt English earlier.",
              "I wish I learnt English earlier."
            ],
            correct:0
          },
          {
            text:"–ñ–∞–ª—å, —á—Ç–æ —Å–µ–π—á–∞—Å —É –º–µ–Ω—è –Ω–µ—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏.",
            options:[
              "If only I had more time now.",
              "If only I have more time now."
            ],
            correct:0
          },
          {
            text:"–Ø –ø—Ä–µ–¥–ø–æ—á—ë–ª –±—ã, —á—Ç–æ–±—ã —Ç—ã –æ—Å—Ç–∞–ª—Å—è –¥–æ–º–∞.",
            options:[
              "I would rather you stayed at home.",
              "I would rather you stay at home now."
            ],
            correct:0
          },
          {
            text:"–ñ–∞–ª—å, —á—Ç–æ –æ–Ω –Ω–µ —Å–ª—É—à–∞–ª –Ω–∞—Å –≤—á–µ—Ä–∞.",
            options:[
              "I wish he had listened to us yesterday.",
              "I wish he listened to us yesterday."
            ],
            correct:0
          }
        ]
      }
    ]
  }
];
  ,
  {
    id:6,
    title:"Passive reporting structures",
    level:"Advanced",
    explanation:"We use passive reporting structures to sound more formal and impersonal, especially in news, academic and official style (It is said that..., He is believed to...).",
    ruleRu:"–ü–∞—Å—Å–∏–≤–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å –≥–ª–∞–≥–æ–ª–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (say, think, believe, report –∏ –¥—Ä.) –¥–µ–ª–∞—é—Ç —Ä–µ—á—å –±–æ–ª–µ–µ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–π –∏ –±–µ–∑–ª–∏—á–Ω–æ–π: It is said that..., He is believed to....",
    formulas:[
      "It is/was said that + clause",
      "S is/was thought/believed/known to + V",
      "It is believed that + clause"
    ],
    examples:[
      "It is said that the company will close next year.",
      "He is believed to have left the country."
    ],
    exercises:[
      {
        title:"1) Affirmative (choose correct passive report)",
        questions:[
          {
            text:"People say that he is very rich.",
            options:[
              "It is said that he is very rich.",
              "He said to be very rich."
            ],
            correct:0
          },
          {
            text:"Many people believe that the plan will work.",
            options:[
              "It is believed that the plan will work.",
              "The plan is believe to work."
            ],
            correct:0
          },
          {
            text:"Everybody knows that she is honest.",
            options:[
              "It is known that she is honest.",
              "She is know to be honest."
            ],
            correct:0
          },
          {
            text:"They think that the project is too expensive.",
            options:[
              "It is thought that the project is too expensive.",
              "The project thought to be too expensive."
            ],
            correct:0
          }
        ]
      },
      {
        title:"2) Negative",
        questions:[
          {
            text:"–õ—é–¥–∏ –Ω–µ –¥—É–º–∞—é—Ç, —á—Ç–æ —ç—Ç–∞ –∏–¥–µ—è –±–µ–∑–æ–ø–∞—Å–Ω–∞.",
            options:[
              "It is not thought that this idea is safe.",
              "This idea is not thought is safe."
            ],
            correct:0
          },
          {
            text:"–ù–µ –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –æ–Ω –±—É–¥–µ—Ç —É–≤–æ–ª–µ–Ω.",
            options:[
              "It is not said that he will be fired.",
              "He is not said that he will be fired."
            ],
            correct:0
          },
          {
            text:"–ù–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —ç–∫–∑–∞–º–µ–Ω –±—É–¥–µ—Ç –ª—ë–≥–∫–∏–º.",
            options:[
              "It is not expected that the exam will be easy.",
              "The exam is not expected will be easy."
            ],
            correct:0
          },
          {
            text:"–ù–µ –≤–µ—Ä—è—Ç, —á—Ç–æ –æ–Ω–∞ –≤–∏–Ω–æ–≤–∞—Ç–∞.",
            options:[
              "It is not believed that she is guilty.",
              "She is not believed that she is guilty."
            ],
            correct:0
          }
        ]
      },
      {
        title:"3) Questions",
        questions:[
          {
            text:"–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å: It is said that the prices will rise.",
            options:[
              "Is it said that the prices will rise?",
              "Does it said that the prices will rise?"
            ],
            correct:0
          },
          {
            text:"–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å: He is thought to be very strict.",
            options:[
              "Is he thought to be very strict?",
              "Does he thought to be very strict?"
            ],
            correct:0
          },
          {
            text:"–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å: It is believed that they left yesterday.",
            options:[
              "Is it believed that they left yesterday?",
              "Does it believed that they left yesterday?"
            ],
            correct:0
          },
          {
            text:"–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å: She is known to have worked there.",
            options:[
              "Is she known to have worked there?",
              "Does she known to have worked there?"
            ],
            correct:0
          }
        ]
      },
      {
        title:"4) Word order",
        questions:[
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "He is said to be very talented.",
              "He said is to be very talented."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "She is believed to have lied.",
              "She believed is to have lied."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "They are reported to have arrived.",
              "They reported are to have arrived."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "It is thought that the results are wrong.",
              "It is thought the results are wrong that."
            ],
            correct:0
          }
        ]
      },
      {
        title:"5) Build the sentence",
        questions:[
          {
            text:"–õ—é–¥–∏ –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –æ–Ω —á–µ—Å—Ç–Ω—ã–π. (It...)",
            options:[
              "It is said that he is honest.",
              "It said that he is honest."
            ],
            correct:0
          },
          {
            text:"–°—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ —ç–∫–∑–∞–º–µ–Ω –±—ã–ª —Å–ª–æ–∂–Ω—ã–º. (It...)",
            options:[
              "It is thought that the exam was difficult.",
              "It thought that the exam was difficult."
            ],
            correct:0
          },
          {
            text:"–°—á–∏—Ç–∞—é—Ç, —á—Ç–æ –æ–Ω–∞ –ø–µ—Ä–µ–µ—Ö–∞–ª–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—É. (She...)",
            options:[
              "She is thought to have moved abroad.",
              "She thought is to have moved abroad."
            ],
            correct:0
          },
          {
            text:"–°—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ–≤–µ—Ä–Ω—ã–µ. (It...)",
            options:[
              "It is believed that the results are wrong.",
              "It believed is that the results are wrong."
            ],
            correct:0
          }
        ]
      },
      {
        title:"6) Translate into English",
        questions:[
          {
            text:"–°—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ —ç—Ç–æ—Ç –≥–æ—Ä–æ–¥ –æ—á–µ–Ω—å –¥–æ—Ä–æ–≥–æ–π.",
            options:[
              "It is believed that this city is very expensive.",
              "It believed that this city is very expensive."
            ],
            correct:0
          },
          {
            text:"–ì–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –æ–Ω –≤—ã–∏–≥—Ä–∞–ª –∫–æ–Ω–∫—É—Ä—Å.",
            options:[
              "It is said that he has won the competition.",
              "He is said that he has won the competition."
            ],
            correct:0
          },
          {
            text:"–°—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ —É—á–∏—Ç–µ–ª—å —Å—Ç—Ä–æ–≥–∏–π.",
            options:[
              "The teacher is thought to be strict.",
              "The teacher thought is to be strict."
            ],
            correct:0
          },
          {
            text:"–°–æ–æ–±—â–∞—é—Ç, —á—Ç–æ –ø–æ–µ–∑–¥ –∑–∞–¥–µ—Ä–∂–∞–ª–∏.",
            options:[
              "The train is reported to have been delayed.",
              "The train reported is to have been delayed."
            ],
            correct:0
          }
        ]
      }
    ]
  },

  {
    id:7,
    title:"Participle clauses",
    level:"Advanced",
    explanation:"Participle clauses (V-ing, V3, having V3) allow us to join ideas and make sentences more compact and formal.",
    ruleRu:"–ü—Ä–∏—á–∞—Å—Ç–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å V-ing, V3 –∏ having V3 –∑–∞–º–µ–Ω—è—é—Ç –ø—Ä–∏–¥–∞—Ç–æ—á–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ –¥–µ–ª–∞—é—Ç —Ç–µ–∫—Å—Ç –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–º: Walking along the street, I saw..., Built in 1990, the house..., Having finished, he left.",
    formulas:[
      "V-ing ... , S + V",
      "V3 (Past Participle) ... , S + V",
      "Having V3 ... , S + V"
    ],
    examples:[
      "Walking along the street, I met an old friend.",
      "Built in 1990, the house needs renovation.",
      "Having finished his work, he went home."
    ],
    exercises:[
      {
        title:"1) Affirmative",
        questions:[
          {
            text:"–ö–æ–≥–¥–∞ –æ–Ω –≤–æ—à—ë–ª –≤ –∫–æ–º–Ω–∞—Ç—É, –æ–Ω —É–ª—ã–±–∞–ª—Å—è. (Entering...)",
            options:[
              "Entering the room, he was smiling.",
              "Entered the room, he was smiling."
            ],
            correct:0
          },
          {
            text:"–¢–∞–∫ –∫–∞–∫ –æ–Ω –∑–Ω–∞–ª –æ—Ç–≤–µ—Ç, –æ–Ω —Å—Ä–∞–∑—É –ø–æ–¥–Ω—è–ª —Ä—É–∫—É. (Knowing...)",
            options:[
              "Knowing the answer, he raised his hand immediately.",
              "Known the answer, he raised his hand immediately."
            ],
            correct:0
          },
          {
            text:"–ö–æ–≥–¥–∞ –æ–Ω–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞ –æ—Ç—á—ë—Ç, –æ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∏–ª–∞ –µ–≥–æ. (Having...)",
            options:[
              "Having finished the report, she sent it.",
              "Finished the report, she sent it."
            ],
            correct:0
          },
          {
            text:"–ü–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ 2000 –≥–æ–¥—É, –º–æ—Å—Ç –¥–æ —Å–∏—Ö –ø–æ—Ä –±–µ–∑–æ–ø–∞—Å–µ–Ω. (Built...)",
            options:[
              "Built in 2000, the bridge is still safe.",
              "Building in 2000, the bridge is still safe."
            ],
            correct:0
          }
        ]
      },
      {
        title:"2) Negative",
        questions:[
          {
            text:"–ù–µ –∑–Ω–∞—è –ø—Ä–∞–≤–∏–ª, –æ–Ω —Å–æ–≤–µ—Ä—à–∞–ª –æ—à–∏–±–∫–∏. (Not...)",
            options:[
              "Not knowing the rules, he made mistakes.",
              "Not known the rules, he made mistakes."
            ],
            correct:0
          },
          {
            text:"–ù–µ –∑–∞–∫–æ–Ω—á–∏–≤ —Ä–∞–±–æ—Ç—É, –æ–Ω–∞ –Ω–µ —É—à–ª–∞. (Not having...)",
            options:[
              "Not having finished the work, she didn‚Äôt leave.",
              "Having not finished the work, she didn‚Äôt leave."
            ],
            correct:0
          },
          {
            text:"–ù–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥—ë–Ω–Ω—ã–π –∑–∞—Ä–∞–Ω–µ–µ, –æ–Ω —É–¥–∏–≤–∏–ª—Å—è. (Not...)",
            options:[
              "Not warned in advance, he was surprised.",
              "Not warning in advance, he was surprised."
            ],
            correct:0
          },
          {
            text:"–ù–µ –∑–Ω–∞—è, —á—Ç–æ —Å–∫–∞–∑–∞—Ç—å, –æ–Ω –º–æ–ª—á–∞–ª. (Not knowing...)",
            options:[
              "Not knowing what to say, he kept silent.",
              "Not known what to say, he kept silent."
            ],
            correct:0
          }
        ]
      },
      {
        title:"3) Questions",
        questions:[
          {
            text:"–ö–∞–∫ –º–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å: When he finished, he left the room.",
            options:[
              "Finishing the work, he left the room.",
              "Having finished the work, he left the room."
            ],
            correct:1
          },
          {
            text:"–ö–∞–∫ –º–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å: Because she felt tired, she went to bed early.",
            options:[
              "Feeling tired, she went to bed early.",
              "Felt tired, she went to bed early."
            ],
            correct:0
          },
          {
            text:"–ö–∞–∫ –º–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å: As he didn‚Äôt know the answer, he stayed quiet.",
            options:[
              "Not knowing the answer, he stayed quiet.",
              "Not known the answer, he stayed quiet."
            ],
            correct:0
          },
          {
            text:"–ö–∞–∫ –º–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å: After he had spoken to the teacher, he felt better.",
            options:[
              "Having spoken to the teacher, he felt better.",
              "Spoken to the teacher, he felt better."
            ],
            correct:0
          }
        ]
      },
      {
        title:"4) Word order",
        questions:[
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "Walking along the river, we saw a swan.",
              "We walking along the river saw a swan."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "Given more time, we could finish the project.",
              "We could finish the project given more time."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "Having lost his keys, he couldn‚Äôt enter the house.",
              "He having lost his keys couldn‚Äôt enter the house."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "Not knowing the way, they asked for help.",
              "Knowing not the way, they asked for help."
            ],
            correct:0
          }
        ]
      },
      {
        title:"5) Build the sentence",
        questions:[
          {
            text:"–ü–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–≤ —Ö–æ–ª–æ–¥, –æ–Ω –∑–∞–∫—Ä—ã–ª –æ–∫–Ω–æ.",
            options:[
              "Feeling cold, he closed the window.",
              "Felt cold, he closed the window."
            ],
            correct:0
          },
          {
            text:"–ü–æ–ª—É—á–∏–≤ –ø–∏—Å—å–º–æ, –æ–Ω–∞ —Å—Ä–∞–∑—É –æ—Ç–≤–µ—Ç–∏–ª–∞.",
            options:[
              "Having received the letter, she answered at once.",
              "Received the letter, she answered at once."
            ],
            correct:0
          },
          {
            text:"–ë—É–¥—É—á–∏ –∑–∞–Ω—è—Ç—ã–º, –æ–Ω –Ω–µ —Å–º–æ–≥ –ø—Ä–∏–π—Ç–∏.",
            options:[
              "Being busy, he couldn‚Äôt come.",
              "Been busy, he couldn‚Äôt come."
            ],
            correct:0
          },
          {
            text:"–ü–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–Ω–æ–≥–æ –ª–µ—Ç –Ω–∞–∑–∞–¥, –¥–æ–º –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —Ä–µ–º–æ–Ω—Ç–µ.",
            options:[
              "Built many years ago, the house needs repairing.",
              "Building many years ago, the house needs repairing."
            ],
            correct:0
          }
        ]
      },
      {
        title:"6) Translate into English",
        questions:[
          {
            text:"–ù–µ –∑–Ω–∞—è –æ—Ç–≤–µ—Ç–∞, –æ–Ω –ø–æ—Å–º–æ—Ç—Ä–µ–ª –Ω–∞ —É—á–∏—Ç–µ–ª—è.",
            options:[
              "Not knowing the answer, he looked at the teacher.",
              "Not known the answer, he looked at the teacher."
            ],
            correct:0
          },
          {
            text:"–ó–∞–∫–æ–Ω—á–∏–≤ —Ç–µ—Å—Ç, —Å—Ç—É–¥–µ–Ω—Ç—ã —Å–¥–∞–ª–∏ —Å–≤–æ–∏ —Ä–∞–±–æ—Ç—ã.",
            options:[
              "Having finished the test, the students handed in their papers.",
              "Finished the test, the students handed in their papers."
            ],
            correct:0
          },
          {
            text:"–ß–∏—Ç–∞—è –∫–Ω–∏–≥—É, –æ–Ω –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª—ã—à–∞–ª –≤–æ–∫—Ä—É–≥.",
            options:[
              "Reading the book, he heard nothing around.",
              "Read the book, he heard nothing around."
            ],
            correct:0
          },
          {
            text:"–ù–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–≤—à–∏—Å—å, –æ–Ω –ø–ª–æ—Ö–æ –Ω–∞–ø–∏—Å–∞–ª —ç–∫–∑–∞–º–µ–Ω.",
            options:[
              "Not having prepared, he did the exam badly.",
              "Having not prepared, he did the exam badly."
            ],
            correct:0
          }
        ]
      }
    ]
  },

  {
    id:8,
    title:"Advanced linking words (contrast & concession)",
    level:"Advanced",
    explanation:"Advanced linking words show contrast and concession: although, even though, whereas, while, in spite of, despite, however, nevertheless.",
    ruleRu:"–î–ª—è –ø—Ä–æ—Ç–∏–≤–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º although / even though, whereas / while, in spite of / despite, however / nevertheless. –û–Ω–∏ –¥–µ–ª–∞—é—Ç —Ä–µ—á—å –±–æ–ª–µ–µ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–π –∏ —Ç–æ—á–Ω–æ–π.",
    formulas:[
      "Although / Even though + clause",
      "Whereas / While + clause",
      "In spite of / Despite + noun / V-ing",
      "..., however, ... / ..., nevertheless, ..."
    ],
    examples:[
      "Although it was raining, we went out.",
      "Despite the rain, we went out.",
      "He is very strict, whereas his brother is easy-going."
    ],
    exercises:[
      {
        title:"1) Affirmative",
        questions:[
          {
            text:"–û–Ω —É—Å—Ç–∞–ª, –Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å.",
            options:[
              "Although he was tired, he continued working.",
              "Despite he was tired, he continued working."
            ],
            correct:0
          },
          {
            text:"–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –¥–æ–∂–¥—å, –æ–Ω–∏ –ø–æ—à–ª–∏ –≥—É–ª—è—Ç—å.",
            options:[
              "Despite the rain, they went for a walk.",
              "Despite it was raining, they went for a walk."
            ],
            correct:0
          },
          {
            text:"–•–æ—Ç—è —ç–∫–∑–∞–º–µ–Ω –±—ã–ª —Å–ª–æ–∂–Ω—ã–º, –æ–Ω–∞ —Å–¥–∞–ª–∞ –µ–≥–æ.",
            options:[
              "Even though the exam was difficult, she passed it.",
              "In spite the exam was difficult, she passed it."
            ],
            correct:0
          },
          {
            text:"–û–Ω —Ö–æ—Ä–æ—à–æ –≥–æ—Ç–æ–≤–∏–ª—Å—è, –æ–¥–Ω–∞–∫–æ –ø–æ–ª—É—á–∏–ª –Ω–µ–≤—ã—Å–æ–∫—É—é –æ—Ü–µ–Ω–∫—É.",
            options:[
              "He had prepared well; however, he got a low mark.",
              "He had prepared well; in spite, he got a low mark."
            ],
            correct:0
          }
        ]
      },
      {
        title:"2) Negative / contrast",
        questions:[
          {
            text:"–û–Ω –≤—ã—Å–æ–∫–∏–π, –∞ –µ–≥–æ –±—Ä–∞—Ç –Ω–µ–≤—ã—Å–æ–∫–∏–π.",
            options:[
              "He is tall, whereas his brother is short.",
              "He is tall, despite his brother is short."
            ],
            correct:0
          },
          {
            text:"–û–Ω–∞ –Ω–µ –ª—é–±–∏—Ç –º–∞—Ç–µ–º–∞—Ç–∏–∫—É, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –µ—ë —Å–µ—Å—Ç—Ä–∞ –æ–±–æ–∂–∞–µ—Ç –µ—ë.",
            options:[
              "She doesn‚Äôt like maths, while her sister loves it.",
              "She doesn‚Äôt like maths, despite her sister loves it."
            ],
            correct:0
          },
          {
            text:"–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –æ–Ω –Ω–µ —É—á–∏–ª—Å—è, –æ–Ω —Å–¥–∞–ª —ç–∫–∑–∞–º–µ–Ω.",
            options:[
              "In spite of not studying, he passed the exam.",
              "In spite of he didn‚Äôt study, he passed the exam."
            ],
            correct:0
          },
          {
            text:"–•–æ—Ç—è –æ–Ω–∏ –Ω–µ –±—ã–ª–∏ –≥–æ—Ç–æ–≤—ã, –æ–Ω–∏ –≤—ã–∏–≥—Ä–∞–ª–∏.",
            options:[
              "Although they were not ready, they won.",
              "Despite they were not ready, they won."
            ],
            correct:0
          }
        ]
      },
      {
        title:"3) Questions",
        questions:[
          {
            text:"–ö–∞–∫–æ–π —Å–æ—é–∑ –ø–æ–¥—Ö–æ–¥–∏—Ç: ___ he was tired, he kept working.",
            options:[
              "Although",
              "Despite"
            ],
            correct:0
          },
          {
            text:"–ö–∞–∫–æ–π —Å–æ—é–∑ –ø–æ–¥—Ö–æ–¥–∏—Ç: ___ his illness, he came to school.",
            options:[
              "In spite of",
              "Although"
            ],
            correct:0
          },
          {
            text:"–ö–∞–∫–æ–π —Å–æ—é–∑ –ø–æ–¥—Ö–æ–¥–∏—Ç: He is serious, ___ his friend is very funny.",
            options:[
              "whereas",
              "despite"
            ],
            correct:0
          },
          {
            text:"–ö–∞–∫–æ–π —Å–æ—é–∑ –ø–æ–¥—Ö–æ–¥–∏—Ç: ___ the bad weather, the match was not cancelled.",
            options:[
              "Despite",
              "Though it"
            ],
            correct:0
          }
        ]
      },
      {
        title:"4) Word order",
        questions:[
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "Despite the traffic, we arrived on time.",
              "Despite of the traffic, we arrived on time."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "Although it was late, they continued talking.",
              "Although was it late, they continued talking."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "He was ill; nevertheless, he came to work.",
              "He was ill; nevertheless he came to work."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "While he likes football, she prefers basketball.",
              "He likes football, while she prefers basketball."
            ],
            correct:1
          }
        ]
      },
      {
        title:"5) Build the sentence",
        questions:[
          {
            text:"–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —É—Å—Ç–∞–ª–æ—Å—Ç—å, –æ–Ω –ø—Ä–æ–¥–æ–ª–∂–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å.",
            options:[
              "Despite his tiredness, he continued working.",
              "Although his tiredness, he continued working."
            ],
            correct:0
          },
          {
            text:"–•–æ—Ç—è –±—ã–ª–æ —Ö–æ–ª–æ–¥–Ω–æ, –æ–Ω–∏ –ø–æ—à–ª–∏ –∫—É–ø–∞—Ç—å—Å—è.",
            options:[
              "Although it was cold, they went swimming.",
              "Despite it was cold, they went swimming."
            ],
            correct:0
          },
          {
            text:"–û–Ω–∞ –æ—á–µ–Ω—å —Å–ø–æ–∫–æ–π–Ω–∞—è, —Ç–æ–≥–¥–∞ –∫–∞–∫ –µ—ë –±—Ä–∞—Ç –≤—Å–ø—ã–ª—å—á–∏–≤—ã–π.",
            options:[
              "She is very calm, whereas her brother is hot-tempered.",
              "She is very calm, in spite her brother is hot-tempered."
            ],
            correct:0
          },
          {
            text:"–ë—ã–ª–æ –æ—á–µ–Ω—å —à—É–º–Ω–æ; –æ–¥–Ω–∞–∫–æ, –æ–Ω —Å–º–æ–≥ —É—Å–Ω—É—Ç—å.",
            options:[
              "It was very noisy; however, he managed to fall asleep.",
              "It was very noisy; despite, he managed to fall asleep."
            ],
            correct:0
          }
        ]
      },
      {
        title:"6) Translate into English",
        questions:[
          {
            text:"–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –¥–æ–∂–¥—å, –º—ã –Ω–µ –æ—Ç–º–µ–Ω–∏–ª–∏ –ø–æ–µ–∑–¥–∫—É.",
            options:[
              "Despite the rain, we didn‚Äôt cancel the trip.",
              "Though the rain, we didn‚Äôt cancel the trip."
            ],
            correct:0
          },
          {
            text:"–•–æ—Ç—è –æ–Ω —É—Å—Ç–∞–ª, –æ–Ω –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è.",
            options:[
              "Although he was tired, he didn‚Äôt stop.",
              "In spite he was tired, he didn‚Äôt stop."
            ],
            correct:0
          },
          {
            text:"–û–Ω–∞ –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∞ –µ—ë –∫–æ–ª–ª–µ–≥–∞ –ø–æ—á—Ç–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç.",
            options:[
              "She works a lot, whereas her colleague does almost nothing.",
              "She works a lot, despite her colleague does almost nothing."
            ],
            correct:0
          },
          {
            text:"–û–Ω –æ–ø–æ–∑–¥–∞–ª; —Ç–µ–º –Ω–µ –º–µ–Ω–µ–µ, –µ–≥–æ –Ω–∏–∫—Ç–æ –Ω–µ —Ä—É–≥–∞–ª.",
            options:[
              "He was late; nevertheless, nobody scolded him.",
              "He was late; in spite of, nobody scolded him."
            ],
            correct:0
          }
        ]
      }
    ]
  },

  {
    id:9,
    title:"Reporting verbs and patterns",
    level:"Advanced",
    explanation:"Different reporting verbs take different structures: say, tell, explain, suggest, deny, admit, accuse sb of, insist on, recommend etc.",
    ruleRu:"–†–∞–∑–Ω—ã–µ –≥–ª–∞–≥–æ–ª—ã —Ä–µ—á–∏ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ —Å—Ö–µ–º—ã: say (say that), tell (tell sb that), suggest + V-ing / that, deny + V-ing, admit + V-ing, accuse sb of V-ing, insist on V-ing, recommend (that) + clause.",
    formulas:[
      "say (that) + clause",
      "tell + object + (that) + clause",
      "suggest / recommend + V-ing / that + clause",
      "deny / admit + V-ing",
      "accuse + object + of + V-ing",
      "insist on + V-ing"
    ],
    examples:[
      "He suggested going to the cinema.",
      "She denied taking the money.",
      "They accused him of cheating."
    ],
    exercises:[
      {
        title:"1) Affirmative",
        questions:[
          {
            text:"–û–Ω –ø—Ä–µ–¥–ª–æ–∂–∏–ª –ø–æ–π—Ç–∏ –≤ –∫–∏–Ω–æ.",
            options:[
              "He suggested going to the cinema.",
              "He suggested to go to the cinema."
            ],
            correct:0
          },
          {
            text:"–û–Ω–∞ –ø—Ä–∏–∑–Ω–∞–ª–∞—Å—å, —á—Ç–æ —Å–ø–∏—Å–∞–ª–∞.",
            options:[
              "She admitted cheating.",
              "She admitted to cheat."
            ],
            correct:0
          },
          {
            text:"–û–Ω–∏ –æ–±–≤–∏–Ω–∏–ª–∏ –µ–≥–æ –≤ –∫—Ä–∞–∂–µ.",
            options:[
              "They accused him of stealing.",
              "They accused him for stealing."
            ],
            correct:0
          },
          {
            text:"–£—á–∏—Ç–µ–ª—å –Ω–∞—Å—Ç–æ—è–ª –Ω–∞ —Ç–æ–º, —á—Ç–æ–±—ã –º—ã —Å–¥–µ–ª–∞–ª–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ.",
            options:[
              "The teacher insisted on our doing the exercise.",
              "The teacher insisted us to do the exercise."
            ],
            correct:0
          }
        ]
      },
      {
        title:"2) Negative",
        questions:[
          {
            text:"–û–Ω–∞ –æ—Ç—Ä–∏—Ü–∞–ª–∞, —á—Ç–æ –≤–∑—è–ª–∞ –¥–µ–Ω—å–≥–∏.",
            options:[
              "She denied taking the money.",
              "She denied to take the money."
            ],
            correct:0
          },
          {
            text:"–û–Ω –Ω–µ –ø—Ä–∏–∑–Ω–∞–≤–∞–ª —Å–≤–æ—é –æ—à–∏–±–∫—É.",
            options:[
              "He didn‚Äôt admit his mistake.",
              "He denied his mistake to be."
            ],
            correct:0
          },
          {
            text:"–û–Ω –æ—Ç—Ä–∏—Ü–∞–ª, —á—Ç–æ —Å–ø–∏—Å—ã–≤–∞–ª –Ω–∞ —ç–∫–∑–∞–º–µ–Ω–µ.",
            options:[
              "He denied cheating in the exam.",
              "He denied to cheat in the exam."
            ],
            correct:0
          },
          {
            text:"–û–Ω–∏ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª–∏ –º–µ–Ω—è—Ç—å –ø–ª–∞–Ω.",
            options:[
              "They didn‚Äôt recommend changing the plan.",
              "They didn‚Äôt recommend to change the plan it."
            ],
            correct:0
          }
        ]
      },
      {
        title:"3) Questions",
        questions:[
          {
            text:"–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å: He suggested going home early.",
            options:[
              "What did he suggest?",
              "What did he suggest to go?"
            ],
            correct:0
          },
          {
            text:"–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å: She denied taking the book.",
            options:[
              "Did she deny taking the book?",
              "Did she deny to take the book?"
            ],
            correct:0
          },
          {
            text:"–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å: They accused him of lying.",
            options:[
              "Who did they accuse of lying?",
              "Who did they accuse for lying?"
            ],
            correct:0
          },
          {
            text:"–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å: The doctor recommended having a rest.",
            options:[
              "What did the doctor recommend?",
              "What did the doctor recommend to have?"
            ],
            correct:0
          }
        ]
      },
      {
        title:"4) Word order",
        questions:[
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "He told me that he was busy.",
              "He told that me he was busy."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "She explained that the task was difficult.",
              "She explained me that the task was difficult."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "They suggested that we should stay.",
              "They suggested us that we should stay."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "He insisted on doing it himself.",
              "He insisted to do it himself."
            ],
            correct:0
          }
        ]
      },
      {
        title:"5) Build the sentence",
        questions:[
          {
            text:"–û–Ω –æ–±—ä—è—Å–Ω–∏–ª, —á—Ç–æ –∞–≤—Ç–æ–±—É—Å –æ–ø–æ–∑–¥–∞–ª.",
            options:[
              "He explained that the bus was late.",
              "He explained me that the bus was late."
            ],
            correct:0
          },
          {
            text:"–û–Ω–∞ –ø–æ—Å–æ–≤–µ—Ç–æ–≤–∞–ª–∞ –Ω–∞–º –Ω–∞—á–∞—Ç—å —Ä–∞–Ω—å—à–µ.",
            options:[
              "She recommended starting earlier.",
              "She recommended to start earlier us."
            ],
            correct:0
          },
          {
            text:"–û–Ω–∏ –æ–±–≤–∏–Ω–∏–ª–∏ –º–µ–Ω—è –≤ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –ø—Ä–∞–≤–∏–ª.",
            options:[
              "They accused me of breaking the rules.",
              "They accused me for breaking the rules."
            ],
            correct:0
          },
          {
            text:"–û–Ω –ø—Ä–∏–∑–Ω–∞–ª—Å—è, —á—Ç–æ —Å–æ–ª–≥–∞–ª.",
            options:[
              "He admitted lying.",
              "He admitted to lie."
            ],
            correct:0
          }
        ]
      },
      {
        title:"6) Translate into English",
        questions:[
          {
            text:"–û–Ω —Å–∫–∞–∑–∞–ª, —á—Ç–æ –æ–ø–æ–∑–¥–∞–µ—Ç.",
            options:[
              "He said that he would be late.",
              "He told that he would be late."
            ],
            correct:0
          },
          {
            text:"–û–Ω–∞ —Å–∫–∞–∑–∞–ª–∞ –º–Ω–µ, —á—Ç–æ –Ω–µ –ø—Ä–∏–¥—ë—Ç.",
            options:[
              "She told me that she wouldn‚Äôt come.",
              "She said me that she wouldn‚Äôt come."
            ],
            correct:0
          },
          {
            text:"–£—á–∏—Ç–µ–ª—å –Ω–∞—Å—Ç–æ—è–ª –Ω–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–∏ –ø—Ä–∞–≤–∏–ª.",
            options:[
              "The teacher insisted on revising the rules.",
              "The teacher insisted to revise the rules."
            ],
            correct:0
          },
          {
            text:"–û–Ω –æ—Ç—Ä–∏—Ü–∞–ª, —á—Ç–æ —Å–ø–∏—Å—ã–≤–∞–ª.",
            options:[
              "He denied cheating.",
              "He denied to cheat."
            ],
            correct:0
          }
        ]
      }
    ]
  },

  {
    id:10,
    title:"Advanced relative clauses with prepositions",
    level:"Advanced",
    explanation:"In formal English, prepositions can come before relative pronouns (to whom, with whom, about which). In spoken English, prepositions are usually at the end (who... with / which... about).",
    ruleRu:"–í —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ –ø—Ä–µ–¥–ª–æ–≥ —Å—Ç–∞–≤–∏—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ–º (to whom, with whom, about which). –í —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω–æ–º ‚Äì –æ–±—ã—á–Ω–æ –≤ –∫–æ–Ω—Ü–µ: the person who I spoke to.",
    formulas:[
      "the person to whom I spoke",
      "the person who I spoke to",
      "the problem about which we talked",
      "the problem which we talked about"
    ],
    examples:[
      "The professor to whom I spoke was very helpful.",
      "The girl who I was talking to is my cousin."
    ],
    exercises:[
      {
        title:"1) Affirmative",
        questions:[
          {
            text:"This is the man. I was talking to him yesterday.",
            options:[
              "This is the man who I was talking to yesterday.",
              "This is the man to who I was talking yesterday."
            ],
            correct:0
          },
          {
            text:"That is the teacher. I learned a lot from her.",
            options:[
              "That is the teacher from whom I learned a lot.",
              "That is the teacher whom from I learned a lot."
            ],
            correct:0
          },
          {
            text:"This is the topic. We talked about it.",
            options:[
              "This is the topic we talked about.",
              "This is the topic about what we talked."
            ],
            correct:0
          },
          {
            text:"He is the person. I can rely on him.",
            options:[
              "He is the person I can rely on.",
              "He is the person on whom can I rely."
            ],
            correct:0
          }
        ]
      },
      {
        title:"2) Negative",
        questions:[
          {
            text:"–≠—Ç–æ –Ω–µ —Ç–æ—Ç —á–µ–ª–æ–≤–µ–∫, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ —è –º–æ–≥—É –ø–æ–ª–æ–∂–∏—Ç—å—Å—è.",
            options:[
              "He is not the person I can rely on.",
              "He is not the person on whom can I rely."
            ],
            correct:0
          },
          {
            text:"–≠—Ç–æ –Ω–µ —Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞, –æ –∫–æ—Ç–æ—Ä–æ–π –º—ã –¥–æ–ª–∂–Ω—ã –≥–æ–≤–æ—Ä–∏—Ç—å —Å–µ–π—á–∞—Å.",
            options:[
              "This is not the problem we should talk about now.",
              "This is not the problem about which should we talk now."
            ],
            correct:0
          },
          {
            text:"–≠—Ç–æ –Ω–µ —Ç–æ—Ç —Å—Ç—É–¥–µ–Ω—Ç, —Å –∫–æ—Ç–æ—Ä—ã–º —è –¥–µ–ª–∏–ª –∫–æ–º–Ω–∞—Ç—É.",
            options:[
              "He is not the student with whom I shared a room.",
              "He is not the student whom with I shared a room."
            ],
            correct:0
          },
          {
            text:"–≠—Ç–æ –Ω–µ —Ç–∞ –∫–Ω–∏–≥–∞, –∏–∑ –∫–æ—Ç–æ—Ä–æ–π —è —É–∑–Ω–∞–ª —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.",
            options:[
              "This is not the book from which I learnt this information.",
              "This is not the book which from I learnt this information."
            ],
            correct:0
          }
        ]
      },
      {
        title:"3) Questions",
        questions:[
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "Who is the person you were talking to?",
              "Who is the person to whom were you talking?"
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "Which is the project that you are responsible for?",
              "Which is the project for which are you responsible?"
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "What is the problem you are worried about?",
              "What is the problem about which are you worried?"
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "Who is the student the teacher is shouting at?",
              "Who is the student at whom is the teacher shouting?"
            ],
            correct:0
          }
        ]
      },
      {
        title:"4) Word order",
        questions:[
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "The woman to whom I spoke was very polite.",
              "The woman whom I spoke to was very polite to."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "The house in which I grew up is near here.",
              "The house which I grew up in is near here in."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "The issue about which we are worried is serious.",
              "The issue which we are worried about is serious about."
            ],
            correct:0
          },
          {
            text:"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.",
            options:[
              "The person with whom I work is very experienced.",
              "The person whom I work with is very experienced with."
            ],
            correct:0
          }
        ]
      },
      {
        title:"5) Build the sentence",
        questions:[
          {
            text:"–í–æ—Ç —Å—Ç—É–¥–µ–Ω—Ç, —Å –∫–æ—Ç–æ—Ä—ã–º —è –¥–µ–ª–∞—é –ø—Ä–æ–µ–∫—Ç.",
            options:[
              "This is the student I am doing the project with.",
              "This is the student with who I am doing the project."
            ],
            correct:0
          },
          {
            text:"–í–æ—Ç –∂–µ–Ω—â–∏–Ω–∞, —Å –∫–æ—Ç–æ—Ä–æ–π –æ–Ω –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞–ª.",
            options:[
              "That is the woman he travelled with.",
              "That is the woman with whom he travelled with."
            ],
            correct:0
          },
          {
            text:"–≠—Ç–æ —Ç–µ–º–∞, –æ –∫–æ—Ç–æ—Ä–æ–π –º—ã –±—É–¥–µ–º –≥–æ–≤–æ—Ä–∏—Ç—å –∑–∞–≤—Ç—Ä–∞.",
            options:[
              "This is the topic we are going to talk about tomorrow.",
              "This is the topic about which we are going to talk about tomorrow."
            ],
            correct:0
          },
          {
            text:"–≠—Ç–æ —á–µ–ª–æ–≤–µ–∫, —É –∫–æ—Ç–æ—Ä–æ–≥–æ —è –º–Ω–æ–≥–æ–º—É –Ω–∞—É—á–∏–ª—Å—è.",
            options:[
              "He is the person from whom I have learnt a lot.",
              "He is the person who I have learnt a lot from him."
            ],
            correct:0
          }
        ]
      },
      {
        title:"6) Translate into English",
        questions:[
          {
            text:"–≠—Ç–æ —É—á–∏—Ç–µ–ª—å, —É –∫–æ—Ç–æ—Ä–æ–≥–æ —è —É—á–∏–ª—Å—è –≤ –ø—Ä–æ—à–ª–æ–º –≥–æ–¥—É.",
            options:[
              "This is the teacher whom I studied with last year.",
              "This is the teacher with who I studied last year."
            ],
            correct:0
          },
          {
            text:"–≠—Ç–æ –∫–æ–º–ø–∞–Ω–∏—è, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç.",
            options:[
              "This is the company he works for.",
              "This is the company for which he works for."
            ],
            correct:0
          },
          {
            text:"–í–æ—Ç —á–µ–ª–æ–≤–µ–∫, –æ –∫–æ—Ç–æ—Ä–æ–º —è —Ç–µ–±–µ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª.",
            options:[
              "This is the person I told you about.",
              "This is the person about whom I told you about."
            ],
            correct:0
          },
          {
            text:"–≠—Ç–æ —Ç–µ–º–∞, –Ω–∞–¥ –∫–æ—Ç–æ—Ä–æ–π –º—ã —Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞–µ–º.",
            options:[
              "This is the topic we are working on now.",
              "This is the topic on which we are working on now."
            ],
            correct:0
          }
        ]
      }
    ]
  }        
];
          
/* ---------- STATE & STORAGE ---------- */

let currentUser = null;   // {name, code, classLabel, stars, lastLogin, attempts:{}}
let currentTopicId = null;

function todayStr(){
  return new Date().toISOString().slice(0,10);
}function loadStudent(code, name, classLabel){

function studentKey(code){
  // –æ—Ç–¥–µ–ª—å–Ω—ã–π namespace –¥–ª—è Advanced
  return "bayan_adv_student_" + code;
}

  const key = studentKey(code);
  let data = null;
  try{
    data = JSON.parse(localStorage.getItem(key));
  }catch(e){
    data = null;
  }
  if(!data){
    data = {
      name: name || "",
      code,
      classLabel,
      stars: 0,
      lastLogin: null,
      attempts: {} // topicId: true (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ 1 –ø–æ–ø—ã—Ç–∫–∞)
    };
  }else{
    if(name) data.name = name;
    data.classLabel = classLabel;
    if(typeof data.stars !== "number") data.stars = 0;
    if(!data.attempts || typeof data.attempts !== "object"){
      data.attempts = {};
    }
  }
  data.lastLogin = todayStr();
  localStorage.setItem(key, JSON.stringify(data));
  return data;
}

function saveCurrent(){
  if(!currentUser) return;
  const key = studentKey(currentUser.code);
  localStorage.setItem(key, JSON.stringify(currentUser));
}

/* ---------- SCREEN SWITCHING ---------- */

function showOnly(id){
  document.getElementById("loginScreen").classList.add("hidden");
  document.getElementById("mainMenuScreen").classList.add("hidden");
  document.getElementById("topicScreen").classList.add("hidden");
  document.getElementById("teacherScreen").classList.add("hidden");
  document.getElementById(id).classList.remove("hidden");
}

function setTopInfo(html){
  document.getElementById("topInfo").innerHTML = html;
}

/* ---------- LOGIN (teacher code 6678) ---------- */

function handleLogin(){
  const name = document.getElementById("loginName").value.trim();
  const codeStr = document.getElementById("loginCode").value.trim();
  const errorEl = document.getElementById("loginError");

  errorEl.classList.add("hidden");
  errorEl.textContent = "";

  if(!codeStr){
    errorEl.textContent = "Enter your code.";
    errorEl.classList.remove("hidden");
    return;
  }

  // –£—á–∏—Ç–µ–ª—å
  if(codeStr === "6678"){
    currentUser = null;
    setTopInfo(`Logged in as <strong>TEACHER</strong> ¬∑ code 6678`);
    renderTeacherTable();
    showOnly("teacherScreen");
    return;
  }

  const num = Number(codeStr);
  if(!Number.isInteger(num)){
    errorEl.textContent = "Code must be a number.";
    errorEl.classList.remove("hidden");
    return;
  }

  const classLabel = getClassByCode(num);
  if(!classLabel){
    errorEl.textContent = "Unknown student code. Ask your teacher.";
    errorEl.classList.remove("hidden");
    return;
  }
  if(!name){
    errorEl.textContent = "Enter your name.";
    errorEl.classList.remove("hidden");
    return;
  }

  currentUser = loadStudent(num, name, classLabel);
  saveCurrent();

  setTopInfo(
    `Class <strong>${currentUser.classLabel}</strong> ¬∑ Student: <strong>${currentUser.name}</strong> (code ${currentUser.code}) ¬∑ Stars: <strong id="topStars">${currentUser.stars}</strong>`
  );

  buildMainMenu();
  updateTopStars();
  showOnly("mainMenuScreen");
}

function backToLogin(){
  currentUser = null;
  setTopInfo("Not logged in");
  document.getElementById("loginName").value = "";
  document.getElementById("loginCode").value = "";
  showOnly("loginScreen");
}

/* ---------- MAIN MENU UI ---------- */

function buildMainMenu(){
  if(!currentUser) return;
  const menuInfo = document.getElementById("menuInfo");
  menuInfo.innerHTML =
    `Class <strong>${currentUser.classLabel}</strong>, student <strong>${currentUser.name}</strong> (code ${currentUser.code})`;

  document.getElementById("menuStars").textContent = currentUser.stars ?? 0;

  const grid = document.getElementById("menuTopics");
  grid.innerHTML = "";

  topics.forEach(t => {
    const div = document.createElement("div");
    div.className = "topic-card";
    const color = topicColors[t.id] || "#ff6f00";
    div.style.borderColor = color + "66";

    div.innerHTML = `
      <div class="topic-card-title">${t.id}. ${t.title}</div>
      <div class="muted">${t.level}</div>
    `;

    div.addEventListener("click", () => openTopic(t.id));
    grid.appendChild(div);
  });

  // AI –ø–∞–Ω–µ–ª—å ‚Äì –ø—Ä–æ—Å—Ç–æ–µ demo-—Å–æ–æ–±—â–µ–Ω–∏–µ
  const chat = document.getElementById("chatBox");
  chat.innerHTML = "";
  const msg = document.createElement("div");
  msg.className = "chat-msg";
  msg.textContent = "AI Bayan chat will be added later. Now use grammar topics and exercises.";
  chat.appendChild(msg);
  document.getElementById("aiLimit").textContent = "¬∑ demo mode";
}

/* ---------- TOPIC SCREEN + 1 –ø–æ–ø—ã—Ç–∫–∞ ---------- */

function openTopic(id){
  if(!currentUser) return;
  currentTopicId = id;

  const t = topics.find(x => x.id === id);
  if(!t) return;

  const color = topicColors[id] || "#ff6f00";
  document.documentElement.style.setProperty("--topicColor", color);

  document.getElementById("topicHeaderTitle").textContent = `${id}. ${t.title}`;

  // –ø—Ä–∞–≤–∏–ª–æ
  const rc = document.getElementById("topicRuleContainer");
  rc.innerHTML = "";
  const gbox = document.createElement("div");
  gbox.className = "grammar-box";
  gbox.innerHTML = `
    <strong>Rule (EN):</strong> ${t.explanation || ""}
    ${
      t.formulas && t.formulas.length
        ? "<div style='margin-top:6px;'>" +
          t.formulas.map(f => `<span class="formula">${f}</span>`).join(" ") +
          "</div>"
        : ""
    }
    ${
      t.ruleRu
        ? `<div style="margin-top:8px;font-size:13px;"><strong>–ü—Ä–∞–≤–∏–ª–æ (RU):</strong><br>${t.ruleRu}</div>`
        : ""
    }
  `;
  rc.appendChild(gbox);

  if(t.examples && t.examples.length){
    const ul = document.createElement("ul");
    ul.className = "examples";
    t.examples.forEach(e => {
      const li = document.createElement("li");
      li.textContent = e;
      ul.appendChild(li);
    });
    rc.appendChild(ul);
  }

  // —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
  const ec = document.getElementById("topicExercisesContainer");
  ec.innerHTML = "";

  if(!t.exercises || t.exercises.length === 0){
    const p = document.createElement("p");
    p.className = "muted";
    p.style.marginTop = "10px";
    p.textContent = "Exercises for this topic will be added later.";
    ec.appendChild(p);
  }else{
    const wrapper = document.createElement("div");
    wrapper.className = "exercises";

    t.exercises.forEach((ex, exIndex) => {
      const block = document.createElement("div");
      block.className = "exercise-block";
      block.style.border = "1px solid #ffe0b2";
      block.style.borderRadius = "12px";
      block.style.background = "#fffdf7";
      block.style.padding = "10px 12px";
      block.style.marginBottom = "10px";

      const title = document.createElement("div");
      title.className = "exercise-title";
      title.textContent = ex.title || `Exercise ${exIndex+1}`;
      block.appendChild(title);

      ex.questions.forEach((q, qIndex) => {
        const row = document.createElement("div");
        row.className = "question-row";
        row.style.fontSize = "13px";
        row.style.marginBottom = "6px";
        row.style.display = "flex";
        row.style.flexWrap = "wrap";
        row.style.gap = "6px";
        row.style.alignItems = "center";

        const qText = document.createElement("div");
        qText.className = "question-text";
        qText.style.flex = "1 1 160px";
        qText.textContent = `${qIndex+1}) ${q.text}`;
        row.appendChild(qText);

        const opts = document.createElement("div");
        opts.className = "options";
        opts.style.display = "flex";
        opts.style.flexWrap = "wrap";
        opts.style.gap = "6px";

        if(q.options && q.options.length){
          q.options.forEach((opt, optIndex) => {
            const label = document.createElement("label");
            label.style.background = "#ffffff";
            label.style.borderRadius = "999px";
            label.style.border = "1px solid #ffd180";
            label.style.padding = "2px 8px";
            label.style.cursor = "pointer";
            label.style.display = "inline-flex";
            label.style.alignItems = "center";
            label.style.gap = "3px";

            const radio = document.createElement("input");
            radio.type = "radio";
            const gname = `t${id}_e${exIndex}_q${qIndex}`;
            radio.name = gname;
            radio.value = optIndex;

            label.appendChild(radio);
            label.appendChild(document.createTextNode(" " + opt));
            opts.appendChild(label);
          });
        }

        row.appendChild(opts);

        const mark = document.createElement("span");
        mark.className = "mark";
        mark.id = `mark_t${id}_e${exIndex}_q${qIndex}`;
        mark.style.width = "18px";
        mark.style.textAlign = "center";
        mark.style.fontSize = "16px";
        mark.style.fontWeight = "700";
        row.appendChild(mark);

        block.appendChild(row);
      });

      const footer = document.createElement("div");
      footer.className = "exercise-footer";
      footer.style.marginTop = "6px";
      footer.style.display = "flex";
      footer.style.justifyContent = "space-between";
      footer.style.alignItems = "center";
      footer.style.gap = "8px";

      const small = document.createElement("small");
      small.style.fontSize = "11px";
      small.style.color = "#6b5f55";
      small.textContent = "Each correct answer gives you 1 star. Only ONE attempt for this topic.";
      footer.appendChild(small);

      const btn = document.createElement("button");
      btn.className = "btn btn-primary";
      btn.textContent = "Check";
      btn.addEventListener("click", () => checkExercise(id, exIndex));
      footer.appendChild(btn);

      block.appendChild(footer);
      wrapper.appendChild(block);
    });

    ec.appendChild(wrapper);
  }

  const status = document.getElementById("topicStatus");
  status.textContent = "";
  if(currentUser && currentUser.attempts && currentUser.attempts[id]){
    status.textContent = "You have already used your attempt for this topic.";
  }else{
    status.textContent = "You still have 1 attempt for this topic.";
  }

  showOnly("topicScreen");
}

function backToMenu(){
  if(!currentUser){
    backToLogin();
    return;
  }
  buildMainMenu();
  showOnly("mainMenuScreen");
}

/* ---------- CHECK EXERCISE (1 –ø–æ–ø—ã—Ç–∫–∞ –Ω–∞ —Ç–µ–º—É) ---------- */

function checkExercise(topicId, exIndex){
  if(!currentUser) return;

  const status = document.getElementById("topicStatus") || { textContent:"" };

  // –£–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ø–æ–ø—ã—Ç–∫—É?
  if(currentUser.attempts && currentUser.attempts[topicId]){
    status.textContent = "You have already used your attempt for this topic.";
    return;
  }

  const t = topics.find(x => x.id === topicId);
  if(!t) return;

  const ex = t.exercises[exIndex];
  if(!ex) return;

  let gained = 0;

  ex.questions.forEach((q, qIndex) => {
    const gname = `t${topicId}_e${exIndex}_q${qIndex}`;
    const selected = document.querySelector(`input[name="${gname}"]:checked`);
    const markEl = document.getElementById(`mark_t${topicId}_e${exIndex}_q${qIndex}`);

    if(!markEl) return;
    markEl.textContent = "";
    markEl.style.color = "#3a2b1f";

    if(!selected){
      markEl.textContent = "‚Ä¢";
      return;
    }

    const chosen = Number(selected.value);
    if(chosen === q.correct){
      markEl.textContent = "‚úì";
      markEl.style.color = "#2e7d32";
      gained++;
    }else{
      markEl.textContent = "‚úó";
      markEl.style.color = "#c62828";
    }
  });

  // –ü–æ–º–µ—á–∞–µ–º, —á—Ç–æ –ø–æ–ø—ã—Ç–∫–∞ –¥–ª—è –í–°–ï–ô —Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞
  if(!currentUser.attempts || typeof currentUser.attempts !== "object"){
    currentUser.attempts = {};
  }
  currentUser.attempts[topicId] = true;

  if(gained > 0){
    currentUser.stars += gained;
    saveCurrent();
    updateTopStars();
    status.textContent = `Well done! You gained ${gained} star(s). Your attempt for this topic is now used.`;
  }else{
    saveCurrent();
    status.textContent = "No correct answers this time. Your attempt for this topic is used.";
  }
}

/* ---------- TEACHER TABLE ---------- */

function renderTeacherTable(){
  const tbody = document.querySelector("#teacherTable tbody");
  tbody.innerHTML = "";

  const allStudents = [];

  classRanges.forEach(r => {
    for(let code = r.from; code <= r.to; code++){
      const key = studentKey(code);
      let data = null;
      try{
        data = JSON.parse(localStorage.getItem(key));
      }catch(e){
        data = null;
      }
      if(data){
        if(!data.attempts || typeof data.attempts !== "object"){
          data.attempts = {};
        }
        allStudents.push(data);
      }
    }
  });

  if(allStudents.length === 0){
    const tr = document.createElement("tr");
    const td = document.createElement("td");
    td.colSpan = 6;
    td.textContent = "No student data in this browser yet.";
    tr.appendChild(td);
    tbody.appendChild(tr);
    return;
  }

  allStudents.sort((a,b) => a.code - b.code);

  allStudents.forEach(s => {
    const tr = document.createElement("tr");

    const clsTd = document.createElement("td");
    clsTd.textContent = s.classLabel || getClassByCode(s.code) || "";
    const codeTd = document.createElement("td");
    codeTd.textContent = s.code;
    const nameTd = document.createElement("td");
    nameTd.textContent = s.name || "";
    const starsTd = document.createElement("td");
    starsTd.textContent = s.stars ?? 0;
    const loginTd = document.createElement("td");
    loginTd.textContent = s.lastLogin || "";

    const attemptsTd = document.createElement("td");
    const cnt = s.attempts ? Object.keys(s.attempts).length : 0;
    attemptsTd.textContent = `${cnt} topic(s)`;

    tr.appendChild(clsTd);
    tr.appendChild(codeTd);
    tr.appendChild(nameTd);
    tr.appendChild(starsTd);
    tr.appendChild(loginTd);
    tr.appendChild(attemptsTd);

    tbody.appendChild(tr);
  });
}

/* ---------- STARS DISPLAY ---------- */

function updateTopStars(){
  if(!currentUser) return;
  const topStarsEl = document.getElementById("topStars");
  if(topStarsEl) topStarsEl.textContent = currentUser.stars;

  const menuStarsEl = document.getElementById("menuStars");
  if(menuStarsEl) menuStarsEl.textContent = currentUser.stars;
}

/* ---------- INIT ---------- */

showOnly("loginScreen");
</script>
</body>
</html>
